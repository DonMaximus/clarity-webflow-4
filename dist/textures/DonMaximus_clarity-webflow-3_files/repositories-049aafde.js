System.register(["./chunk-vendor.js","./chunk-frameworks.js","./chunk-overview.js","./chunk-get-repo-element.js","./chunk-input-demux.js","./chunk-ref-selector.js"],(function(){"use strict";var e,t,r,n,o,s,a,i,c,l,d,u,f,p,m,h,g,y,j,b,S,v,q,w,k,L,A;return{setters:[function(p){e=p.t,t=p.b,r=p.d,n=p.c,o=p.h,s=p.f,a=p.o,i=p.a,c=p.r,l=p.C,d=p.e,u=p.af,f=p.j},function(e){p=e.e,m=e.z,h=e.c,g=e.r,y=e.F,j=e.E,b=e.S,S=e.aH,v=e.aI,q=e.m,w=e.aJ,k=e.D,L=e.aX},function(){},function(e){A=e.G},function(){},function(){}],execute:function(){var _=Object.defineProperty,C=Object.getOwnPropertyDescriptor,T=(e,t)=>_(e,"name",{value:t,configurable:!0}),x=(e,t,r,n)=>{for(var o,s=n>1?void 0:n?C(t,r):t,a=e.length-1;a>=0;a--)(o=e[a])&&(s=(n?o(t,r,s):o(s))||s);return n&&s&&_(t,r,s),s};let I=class extends HTMLElement{constructor(){super(...arguments),this.abortSearch=null,this.originalSelectedItem=null}submit(e){e.preventDefault()}resetField(e){if("Escape"!==o(e))return;const t=this.field.value.trim();this.field.value="",t&&this.search()}reset(){this.field.focus(),this.field.value="",s(this.field,"input")}get activeFilter(){var e;return null!=(e=this.filters.find((e=>e.classList.contains("selected"))))?e:null}async search(){var e;this.originalSelectedItem||(this.originalSelectedItem=this.activeFilter);const t=this.field.value.trim().length>0,r=E(this.field);this.classList.toggle("is-search-mode",t),this.classList.add("is-loading");for(const e of this.filters)e.classList.remove("selected");t?this.allFilter.classList.add("selected"):this.originalSelectedItem&&(this.originalSelectedItem.classList.add("selected"),this.originalSelectedItem=null),null==(e=this.abortSearch)||e.abort();const{signal:n}=this.abortSearch=new AbortController;try{const e=await p(document,r,{signal:n});m(null,"",r),this.result.innerHTML="",this.result.appendChild(e)}catch(e){}n.aborted||this.classList.remove("is-loading")}};function E(e){const t=e.form;if(e.value.trim()){const r=new URL(t.action,window.location.origin),n=new URLSearchParams(r.search.slice(1)),o=t.elements.namedItem("utf8");return o instanceof HTMLInputElement&&n.append("utf8",o.value),n.append("query",e.value),r.search=n.toString(),r.toString()}return t.getAttribute("data-reset-url")}T(I,"BranchFilterElement"),x([e],I.prototype,"field",2),x([e],I.prototype,"result",2),x([e],I.prototype,"allFilter",2),x([t],I.prototype,"filters",2),x([r(100)],I.prototype,"search",1),I=x([n],I),T(E,"queryUrl");var R=Object.defineProperty,P=Object.getOwnPropertyDescriptor,M=(e,t,r,n)=>{for(var o,s=n>1?void 0:n?P(t,r):t,a=e.length-1;a>=0;a--)(o=e[a])&&(s=(n?o(t,r,s):o(s))||s);return n&&s&&R(t,r,s),s};let H=class extends HTMLElement{get branch(){return this.getAttribute("branch")}get branches(){const e=this.closest("branch-filter").querySelectorAll("branch-filter-item");return Array.from(e).filter((e=>e.branch===this.branch))}loading(e){for(const t of this.branches)t.spinner.hidden=!e,t.destroyButton&&(t.destroyButton.hidden=e)}set mode(e){for(const t of this.branches)t.classList.toggle("Details--on","restore"===e)}async restore(e){e.preventDefault(),this.loading(!0);const t=e.target;let r;try{r=await fetch(t.action,{method:t.method,body:new FormData(t),headers:{"X-Requested-With":"XMLHttpRequest"}})}catch(e){}finally{(!r||!r.ok)&&location.reload(),this.loading(!1)}this.mode="destroy"}async destroy(e){e.preventDefault(),this.loading(!0);const t=e.target;let r;try{r=await fetch(t.action,{method:t.method,body:new FormData(t),headers:{"X-Requested-With":"XMLHttpRequest"}})}catch(e){}finally{(!r||!r.ok)&&location.reload(),this.loading(!1)}this.mode="restore"}};R(H,"name",{value:"BranchFilterItemElement",configurable:!0}),M([e],H.prototype,"destroyButton",2),M([e],H.prototype,"spinner",2),H=M([n],H),a(".js-new-badge-autodismiss",{constructor:HTMLFormElement,add:e=>{const t=e.closest("details");t.addEventListener("toggle",(()=>{t.hasAttribute("open")&&fetch(e.action,{method:e.method,body:new FormData(e),headers:{"X-Requested-With":"XMLHttpRequest"}})}))}}),a(".js-fetch-upstream-details-content",{constructor:HTMLElement,initialize(e){e.hidden=!0}}),i("click",".js-fetch-upstream-summary",(async function(){const e=document.querySelector("details.js-fetch-upstream-details"),t=e.querySelector(".js-fetch-upstream-details-spinner");if(e.open)return void(t.hidden=!1);if(t.hidden)return;const r=e.querySelector(".js-fetch-upstream-details-content"),n=r.querySelector(".js-fetch-upstream-conflicts-ui"),o=r.querySelector(".js-fetch-upstream-no-conflicts-ui"),s=r.querySelector(".js-fetch-upstream-conflicts-error-message"),a=r.querySelector(".js-fetch-upstream-conflicts-no-error-message");if(0===parseInt(r.getAttribute("data-behind")))return n.hidden=!0,o.hidden=!1,r.hidden=!1,void(t.hidden=!0);const i=r.getAttribute("data-mergeability-check-url"),c=await fetch(i,{headers:{Accept:"application/json"}});r.hidden=!1,t.hidden=!0,c.ok?"clean"===(await c.json()).state?o.hidden=!1:n.hidden=!1:(n.hidden=!1,s.hidden=!1,a.hidden=!0)})),a(".repository-import",{subscribe:e=>h(e,"socket:message",(function(e){const t=e.detail.data;t.redirect_to&&(document.location.href=t.redirect_to,e.stopImmediatePropagation())}))}),i("change","input.js-repository-import-lfs-opt",(function({currentTarget:e}){const t=parseInt(e.getAttribute("data-percent-used")||""),r=e.closest(".js-repository-import-lfs-container"),n=e.getAttribute("data-used")||"";r.querySelector(".js-repository-import-lfs-warn").classList.toggle("d-none",!(t>100)),r.querySelector(".js-usage-bar").classList.toggle("exceeded",t>=100),r.querySelector(".js-usage-bar").setAttribute("aria-label",`${t}%`),r.querySelector(".js-repository-import-lfs-progress").style.width=`${t}%`,r.querySelector("span.js-usage-text").textContent=n})),c(".js-repository-import-author-form",(async function(e,t){const r=await t.html();e.closest(".js-repository-import-author").replaceWith(r.html)})),i("click",".js-repository-import-projects-cancel-button",(function(){const e=document.querySelector(".js-repository-import-projects-cancel-form");g(e)}));var O=Object.defineProperty,D=(e,t)=>O(e,"name",{value:t,configurable:!0});let F=!1;function $(){return"private"===document.querySelector(".js-privacy-toggle:checked").value}function B(){const e=document.querySelector(".js-repo-name");s(e,"input");const t=document.querySelector('.js-owner-container [aria-checked="true"]'),r="false"!==t.getAttribute("data-org-allow-public-repos"),n=document.querySelector(".js-privacy-toggle[value=public]");W(r,n,document.querySelector(".js-privacy-toggle-label-public"),document.querySelector(".js-public-description"),document.querySelector(".js-public-restricted-by-policy-description"));const o=X(t.getAttribute("data-business-id"),t),a="false"!==t.getAttribute("data-org-allow-private-repos"),i=document.querySelector(".js-privacy-toggle[value=private]"),c=document.querySelector(".js-privacy-toggle-label-private"),l=document.querySelector(".js-private-description"),d=document.querySelector(".js-private-restricted-by-policy-description");W(a,i,c,l,d),U();const u="false"!==t.getAttribute("data-org-private-restricted-by-plan"),f=document.querySelector(".js-upgrade-private-description"),p="false"!==t.getAttribute("data-org-show-upgrade"),m=t.getAttribute("data-org-name"),h=m?document.querySelector(`a[data-upgrade-link="${m}"]`):null,g=document.querySelector(".js-ask-owner-message");a||!u?(f&&(f.hidden=!0),h&&(h.hidden=!0),g&&(g.hidden=!0)):(d&&(d.hidden=u),f&&(f.hidden=!1),h&&(h.hidden=!p),g&&(g.hidden=p));const y=t.getAttribute("data-default-new-repo-branch"),j=document.querySelector(".js-new-repo-owner-default-branch");j&&(j.textContent=y);const b=t.getAttribute("data-owner-settings-link-prefix"),S=document.querySelector(".js-new-repo-owner-settings-link-prefix");S&&(S.textContent=b);const v=t.getAttribute("data-owner-settings-url"),q=document.querySelector(".js-repo-owner-default-branch-settings-link-container"),w=document.querySelector(".js-org-repo-owner-default-branch-settings-info");if(v){const e=document.querySelector(".js-new-repo-owner-settings-link");e&&(e.href=v,q&&(q.hidden=!1)),w&&(w.hidden=!0)}else if(q&&(q.hidden=!0,w)){const e=t.hasAttribute("data-viewer-is-org-admin");w.hidden=!e}const k="true"===t.getAttribute("data-org-show-trade-controls"),L="true"===t.getAttribute("data-viewer-is-org-admin"),A="true"===t.getAttribute("data-user-show-trade-controls"),_=k&&!a,C=document.querySelector(".js-trade-controls-description"),T=document.querySelector(".js-individual-trade-controls-description");A||_?(d&&(d.hidden=!(!A&&!L&&_)),i.disabled=!0,l&&(l.hidden=!0),f&&(f.hidden=!0),h&&(h.hidden=!0),g&&(g.hidden=!0)):(C&&(C.hidden=!0),T&&(T.hidden=!0)),A?(C&&(C.hidden=!0),T&&(T.hidden=!1)):_&&C&&(C.hidden=!L),N(t,n,o,i),z("yes"===t.getAttribute("data-permission")),V(),G();const x=document.querySelector(".js-quick-install-container");if(x){const e=x.querySelector(".js-quick-install-divider");e.hidden=!0;const t=document.querySelector("input[name=owner]:checked").parentElement;if(t){const r=t.querySelector(".js-quick-install-list-template");if(r instanceof HTMLTemplateElement){const t=x.querySelector(".js-account-apps");t.innerHTML="",t.append(r.content.cloneNode(!0)),r.children.length>0&&(e.hidden=!1)}}}}function W(e,t,r,n,o){e?(t&&(t.disabled=!1),r&&r.classList.remove("color-fg-muted"),n&&(n.hidden=!1),o&&(o.hidden=!0)):(t&&(t.disabled=!0),r&&r.classList.add("color-fg-muted"),n&&(n.hidden=!0),o&&(o.hidden=!1))}function U(){const e=document.querySelectorAll('.js-org-upgrade-link:not([hidden=""]');for(const t of e)t.hidden=!0}function N(e,t,r,n){let o=null;if("private"!==e.getAttribute("data-default")||n.disabled?"internal"===e.getAttribute("data-default")&&r&&!r.disabled?o=r:t&&!t.disabled?o=t:r&&!r.disabled&&(o=r):o=n,!o)return;const a=t&&t.disabled&&t.checked||n.disabled&&n.checked||r&&r.disabled&&r.checked,i=!(t&&t.checked||r&&r.checked||n.checked);(!1===F||!0===a||!0===i)&&(o.checked=!0,s(o,"change"))}function X(e,t){let r=!1;const n=document.querySelectorAll(".js-new-repo-internal-visibility");for(const e of n){e.hidden=!0;const t=e.querySelector(".js-privacy-toggle[value=internal]");t instanceof HTMLInputElement&&t.checked&&(r=!0)}if(e){const n=document.querySelector(`#new-repo-internal-visibility-${e}`);if(n){n.hidden=!1;const e=n.querySelector(".js-privacy-toggle-label-internal"),o=n.querySelector(".js-internal-description"),a=n.querySelector(".js-internal-restricted-by-policy-description"),i=n.querySelector(".js-privacy-toggle[value=internal]");if(i instanceof HTMLInputElement)return"false"===t.getAttribute("data-org-allow-internal-repos")?(i.disabled=!0,e&&e.classList.add("color-fg-muted"),o&&(o.hidden=!0),a&&(a.hidden=!1)):(r&&(i.checked=!0,s(i,"change")),i.disabled=!1,e&&e.classList.remove("color-fg-muted"),o&&(o.hidden=!1),a&&(a.hidden=!0)),i}}return null}function z(e){for(const t of document.querySelectorAll(".js-with-permission-fields"))t.hidden=!e;for(const t of document.querySelectorAll(".js-without-permission-fields"))t.hidden=e;const t=document.querySelector(".errored"),r=document.querySelector("dl.warn");t&&(t.hidden=!e),r&&(r.hidden=!e)}function G(e){const t=document.querySelector("#js-upgrade-container");if(!t)return;const r=t.querySelector(".js-billing-section"),n=t.querySelector(".js-confirm-upgrade-checkbox");let o=e?e.target:null;o||(o=document.querySelector(".js-privacy-toggle:checked")),"false"===o.value?(t.hidden=!1,r&&r.classList.remove("has-removed-contents"),n&&(n.checked=!0)):(t.hidden=!0,r&&r.classList.add("has-removed-contents"),n&&(n.checked=!1)),J()}function V(){const e=document.querySelector("#js-upgrade-container");if(!e)return;const t=document.querySelector("#js-payment-methods-form");e.firstElementChild&&t.appendChild(e.firstElementChild);const r=document.querySelector("input[name=owner]:checked").value,n=t.querySelector(`.js-upgrade[data-login="${r}"]`);n&&e.appendChild(n)}function J(){const e=document.querySelector(".js-repo-form"),t=e.querySelector(".js-repository-owner-choice:checked"),r=e.querySelector(".js-repo-name"),n=e.querySelector(".js-repo-url"),o=e.querySelector(".js-repo-gitignore"),s=e.querySelector(".js-repo-license");let a=!n||!n.classList.contains("is-autocheck-errored");if(a=a&&!!t,a&&r&&(a=r.classList.contains("is-autocheck-successful"),$()&&(a=a&&K())),o&&o.checked){const t=e.querySelector('input[name="repository[gitignore_template]"]:checked');a=a&&""!==t.value}if(s&&s.checked){const t=e.querySelector('input[name="repository[license_template]"]:checked');a=a&&""!==t.value}e.querySelector("button[type=submit]").disabled=!a}function K(){const e=document.querySelector("#js-upgrade-container");if(!e)return!0;if(e.querySelector(".js-ofac-sanction-notice"))return!1;const t=e.querySelector(".js-confirm-upgrade-checkbox");if(t instanceof HTMLInputElement&&!t.checked)return!1;const r=e.querySelector(".js-zuora-billing-info");return!(r&&r.classList.contains("d-none"))}function Q(e){const t=e.closest(".js-repo-init-setting-container");if(!t)return;const r=t.querySelector(".js-repo-init-setting-unchecked-menu-option");r.checked||(r.checked=!0,s(r,"change"))}function Y(e){const t=e.closest(".js-repo-init-setting-container");if(!t)return;const r=t.querySelector(".js-toggle-repo-init-setting");r.checked&&(r.checked=!1,s(r,"change"))}function Z(e){const t=e.closest("form"),r=t.querySelector(".js-new-repo-default-branch-info");if(!r)return;const n=t.querySelectorAll(".js-toggle-new-repo-default-branch-info:checked").length>0;r.hidden=!n}D($,"privateRepoSelected"),D(B,"handleOwnerChange"),D(W,"enableDisableRepoType"),D(U,"hideOrgUpgradeLinks"),D(N,"ensureOneRadioIsSelected"),D(X,"updateInternalDiv"),D(z,"togglePermissionFields"),D(G,"handlePrivacyChange"),D(V,"updateUpsell"),D(J,"validate"),D(K,"validBillingInfo"),D(Q,"onRepoInitSettingUnchecked"),D(Y,"onRepoInitNoneMenuOptionSelected"),D(Z,"toggleDefaultBranchInfo"),a("#js-upgrade-container .js-zuora-billing-info:not(.d-none)",J),a(".js-page-new-repo",(function(){const e=document.querySelector("#js-upgrade-container");e&&(e.hidden=!0),B();const t=document.querySelector(".js-repo-form"),r=t.querySelector(".js-repo-url");if(r)return void r.focus();const n=t.querySelector(".js-template-repository-select");if(n)return void n.focus();const o=t.querySelector(".js-owner-select");o&&o.focus()})),i("click",".js-reponame-suggestion",(function(e){const t=document.querySelector(".js-repo-name");t.value=e.currentTarget.textContent,s(t,"input",!1)})),i("click",".js-privacy-toggle",(function(){F=!0})),i("change",".js-privacy-toggle",G),i("details-menu-selected",".js-owner-container",B,{capture:!0}),i("change","#js-upgrade-container input",J),y("#js-upgrade-container input",J);const ee=D((e=>{const t=document.querySelector(".js-org-profile");if(t){const r=document.querySelector(".js-owner-container input.js-repository-owner-is-org:checked"),n=e.target,o=!(r&&".github"===n.value.toLowerCase());t.hidden=o,document.querySelector("#repo-name-suggestion").hidden=!o}}),"renderOrgProfileHint"),te=D((e=>{const t=document.querySelector(".js-personal");if(t){const r=document.querySelector(".js-owner-container input.js-repository-owner-is-viewer"),n=e.target,o=!(r&&r.checked&&r.defaultValue.toLowerCase()===n.value.toLowerCase());t.hidden=o,document.querySelector("#repo-name-suggestion").hidden=!o}}),"renderPersonalProfileHint");y(".js-owner-reponame .js-repo-name",(function(e){te(e),ee(e),J()})),i("auto-check-send",".js-repo-name-auto-check",(function(e){const t=e.currentTarget.form.querySelector("input[name=owner]:checked").value;e.detail.body.append("owner",t)})),i("auto-check-complete","#repository_name",(function(){J()})),y(".js-repo-url",(function(e){const t=e.target;if(!(t instanceof HTMLInputElement))return;const r=t.closest(".form-group");if(!(r instanceof HTMLDListElement))return;const n=document.querySelector(".js-insecure-url-warning"),o=document.querySelector(".js-svn-url-error"),s=document.querySelector(".js-git-url-error"),a=t.value.toLowerCase();n.hidden=!a.startsWith("http://"),o.hidden=!a.startsWith("svn://"),s.hidden=!a.startsWith("git://"),a.startsWith("svn://")||a.startsWith("git://")?(t.classList.add("is-autocheck-errored"),r.classList.add("errored")):(t.classList.remove("is-autocheck-errored"),r.classList.remove("errored")),J()})),i("change",".js-toggle-repo-init-setting",(e=>{const t=e.currentTarget;t.checked||Q(t),J()})),i("change",".js-repo-init-setting-unchecked-menu-option",(e=>{const t=e.currentTarget;t.checked&&Y(t),J()})),i("change",".js-repo-init-setting-menu-option",J),i("change",".js-repo-readme",J),i("change",".js-toggle-new-repo-default-branch-info",(e=>{Z(e.currentTarget)}));var re=Object.defineProperty,ne=(e,t)=>re(e,"name",{value:t,configurable:!0});async function oe(e){return p(document,e)}async function se(e){const t=e.getAttribute("data-pulse-diffstat-summary-url");let r;try{t&&(r=await oe(t),ae(r,e))}catch(t){const r=e.querySelector(".js-blankslate-loading"),n=e.querySelector(".js-blankslate-error");r.classList.add("d-none"),n.classList.remove("d-none")}}function ae(e,t){t.innerHTML="",t.appendChild(e)}a(".js-pulse-contribution-data",(e=>{se(e)})),ne(oe,"diffstatCall"),ne(se,"loadContributionData"),ne(ae,"showContributionData");var ie=Object.defineProperty,ce=(e,t)=>ie(e,"name",{value:t,configurable:!0});async function le(e){const t=e.form;t.querySelector("#release_draft").value="1",ue(e,"saving");const r=await fetch(t.action,{method:t.method,body:new FormData(t),headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(!r.ok)return void ue(e,"failed");const n=await r.json();return ue(e,"saved"),setTimeout(ue,5e3,e,"default"),s(t,"release:saved",{release:n}),n}function de(e){const t=e.closest(".js-releases-marketplace-publish-container").querySelector(".js-releases-marketplace-publish-preview");e.checked?t.classList.remove("d-none"):t.classList.add("d-none")}function ue(e,t){for(const r of e.querySelectorAll(".js-save-draft-button-state"))r.hidden=r.getAttribute("data-state")!==t;e.disabled="saving"===t}function fe(e){const t=document.querySelector(".js-release-target-wrapper");if(null!=t){switch(me(e),e){case"valid":case"invalid":case"duplicate":t.hidden=!0;break;case"loading":break;default:t.hidden=!1}for(const t of document.querySelectorAll(".js-tag-status-message"))t.hidden=t.getAttribute("data-state")!==e;Ae(),Se("pending")}}function pe(){return document.querySelector(".js-release-tag").getAttribute("data-state")}function me(e){document.querySelector(".js-release-tag").setAttribute("data-state",e)}ce(le,"saveDraft"),i("change",".js-releases-marketplace-publish-field",(function(e){de(e.currentTarget)})),a(".js-releases-marketplace-publish-field",(function(e){de(e)})),ce(de,"processMarketplacePublishCheckbox"),i("click",".js-save-draft",(function(e){le(e.currentTarget),e.preventDefault()})),ce(ue,"setState"),i("release:saved",".js-release-form",(function(e){const t=e.detail.release,r=e.currentTarget,n=r.getAttribute("data-repo-url"),o=t.update_url||ke("tag",n,t.tag_name);r.setAttribute("action",o),t.update_authenticity_token&&(r.querySelector("input[name=authenticity_token]").value=t.update_authenticity_token);const s=t.edit_url||ke("edit",n,t.tag_name);m(j(),document.title,s);const a=document.querySelector("#delete_release_confirm form");if(a){const e=t.delete_url||ke("tag",n,t.tag_name);a.setAttribute("action",e),t.delete_authenticity_token&&(a.querySelector("input[name=authenticity_token]").value=t.delete_authenticity_token)}const i=r.querySelector("#release_id");if(!i.value){i.value=t.id;const e=document.createElement("input");e.type="hidden",e.name="_method",e.value="put",r.appendChild(e)}})),i("click",".js-publish-release",(function(){document.querySelector("#release_draft").value="0"})),ce(fe,"setTagWrapperState"),ce(pe,"getTagState"),ce(me,"setTagState");const he=new WeakMap;function ge(e){const t=e.querySelector('input[name="release[tag_name]"]:checked');return null==t?void 0:t.value}async function ye(e){const t=ge(e);if(!t)return void fe("empty");if(t===he.get(e))return;fe("loading"),he.set(e,t);const r=e.getAttribute("data-url"),n=new URL(r,window.location.origin),o=new URLSearchParams(n.search.slice(1));o.append("tag_name",t),n.search=o.toString();const s=await fetch(n.toString(),{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(!s.ok)return void fe("invalid");const a=await s.json();"duplicate"===a.status&&parseInt(e.getAttribute("data-existing-id"))===parseInt(a.release_id)?fe("valid"):(document.querySelector(".js-release-tag .js-edit-release-link").setAttribute("href",a.url),fe(a.status)),Le(e)}async function je(e){Se("loading"),e.disabled=!0;const t=`${e.getAttribute("data-repo-url")}/releases/notes`,r=new URL(t,window.location.origin),n=new URLSearchParams(r.search.slice(1));n.append("commitish",we()),n.append("tag_name",ge(document)||""),r.search=n.toString();const o=await fetch(r.toString(),{headers:{Accept:"application/json"}});if(o.ok){const e=await o.json();if(e.commitish===we()){const t=document.getElementById("release_body"),r="generated"===qe()?"":t.value.trim();t.value=r?r.concat("\n\n",e.body):e.body;const n=document.getElementById("release_name");n.value||(n.value=e.title),Se("succeed"),ve(r?"generated-and-edited":"generated");const o=document.querySelector(".js-release-body-warning");o.textContent=e.warning_message,o.hidden=!e.warning_message}}else{Se("failed"),e.disabled=!1;const t=await o.json();if(t&&t.error){const e=document.querySelector(".js-comment-form-error");e.textContent=t.error,e.hidden=!1}}}ce(ge,"getTagName"),ce(ye,"checkTag"),i("click",".js-generate-release-notes",(function(e){const t=e.currentTarget;t.disabled||je(t)})),ce(je,"generateNotes");const be=["pending","loading","succeed","failed"];function Se(e){if(be.map((t=>{const r=document.getElementById(`generate-icon-${t}`);r&&(t===e?r.removeAttribute("hidden"):r.setAttribute("hidden","true"))})),"failed"!==e){const e=document.querySelector(".js-comment-form-error");e.textContent="",e.hidden=!0}}function ve(e){document.getElementById("generated_notes_state").value=e}function qe(){return document.getElementById("generated_notes_state").value}function we(){var e;return"valid"===pe()?ge(document)||"":(null==(e=document.querySelector('input[name="release[target_commitish]"]:checked'))?void 0:e.value)||""}function ke(e,t,r){return`${t}/releases/${e}/${r}`}function Le(e){const t=e.closest("form").querySelector(".js-previewable-comment-form");if(!t)return;let r=t.getAttribute("data-base-preview-url");r||(r=String(t.getAttribute("data-preview-url")),t.setAttribute("data-base-preview-url",r));const n=e.querySelectorAll('input[name="release[tag_name]"], input[name="release[target_commitish]"]:checked'),o=new URL(r,window.location.origin),s=new URLSearchParams(o.search.slice(1));for(const e of n)e.value&&s.append(e.name,e.value);o.search=s.toString(),t.setAttribute("data-preview-url",o.toString())}function Ae(e=!1){const t=document.querySelector(".js-generate-release-notes");if(t){const r=pe(),n="valid"!==r&&"pending"!==r;t.disabled=e||n,t.ariaLabel=(t.disabled?"Select a valid tag to a":"A")+"utomatically add the markdown for all the merged pull requests from this diff and contributors of this release"}}function _e(e){if(""===e.value)Ae(),Se("pending"),ve("initial");else{const e=qe();Ae("initial"!==e),"generated"===e&&ve("generated-and-edited")}}ce(Se,"setGeneratedNotesFetchState"),ce(ve,"setNotesTrackingState"),ce(qe,"getNotesTrackingState"),ce(we,"getCommitish"),ce(ke,"releasesUrl"),a(".js-release-tag",ce((function(e){ye(e)}),"initialize")),ce(Le,"processChangedTag"),ce(Ae,"refreshGenerateNotesButton"),ce(_e,"processChangedBody"),i("click",".js-release-expand-btn",(async function(e){const t=e.currentTarget.closest(".js-release-expandable"),r=t.getAttribute("data-expand-url"),n=await p(document,r);null==t||t.replaceWith(n)})),a("#release_body",(function(e){const t=e;t.addEventListener("input",(function(){_e(t)})),_e(t)})),i("change",".js-release-tag",(function(e){ye(e.currentTarget)})),a(".js-release-form .js-previewable-comment-form",(function(e){Le(e.closest("form").querySelector(".js-release-tag"))}));var Ce=Object.defineProperty,Te=(e,t)=>Ce(e,"name",{value:t,configurable:!0});let xe,Ie;async function Ee(e){const t=document.querySelector(".js-release-stack").getAttribute("data-stack-url"),r=new URL(t,window.location.origin);let n;switch(He({target_found:!0,template_found:!0,loading:!0},"tag"),e.id){case"tag-list":{const t=e.querySelector('input[name="release[tag_name]"]:checked');if(!t)return;n=await Pe(r,"ref",t),!n.target_found&&!!xe&&(n=await Pe(r,Ie,xe)),He(n,"tag");break}case"filter-list-branches":{const t=e.querySelector('input[name="release[target_commitish]"]:checked');if(!t)return;xe=t,Ie="ref",n=await Pe(r,"ref",t),He(n,"branch");break}case"filter-list-tags":{const t=e.querySelector('input[name="release[target_commitish]"]:checked');if(!t)return;xe=t,Ie="oid",n=await Pe(r,"oid",t),He(n,"commit");break}}}Te(Ee,"validateStack");const Re=new WeakMap;async function Pe(e,t,r){if(Re.has(r))return Re.get(r);const n=new URLSearchParams(e.search.slice(1));n.append(t,r.value),e.search=n.toString();const o=await fetch(e.toString(),{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});let s={target_found:!1};return o.ok&&(s=await o.json(),s.target_found=!0),Re.set(r,s),s}Te(Pe,"getStackStatus");const Me={branding:"Icon and color found in stack template.",template:"Contains all the required information.",readme:"File exists."};function He(e,t){if(!e.target_found)return;const r=document.querySelector(".js-releases-marketplace-banner-container"),n=document.querySelector(".js-releases-marketplace-publish-heading"),o=document.querySelector(".js-publish-release");let s=!1;if(o.disabled=n.hidden=r.hidden=!e.template_found,!e.template_found)return;const a=["branding","template","readme"];for(const n of a){let o;o=e.loading?"loading":e[n]?"failure":"success","failure"===o&&(s=!0);const a=r.querySelector(`#${n}-row`);for(const e of a.querySelectorAll(".status-icon"))e.hidden=e.getAttribute("data-state")!==o;const i=a.querySelector(".js-status-text");for(const e of["color-fg-attention","color-fg-danger","color-fg-muted"])i.classList.remove(e);switch(o){case"success":i.textContent=Me[n],i.classList.add("color-fg-muted");break;case"failure":i.textContent=e[n],i.classList.add("color-fg-danger");break;case"loading":i.textContent="Loading...",i.classList.add("color-fg-attention")}for(const r of a.querySelectorAll(".js-modify-button")){const s=`${n}_path`;r.setAttribute("href",e[s]),r.hidden="branch"!==t||"loading"===o||r.getAttribute("data-state")!==o}}o.disabled=s}Te(He,"updateStackChecks"),i("change",".js-release-stack #filter-list-branches",(e=>Ee(e.currentTarget))),i("change",".js-release-stack #filter-list-tags",(e=>Ee(e.currentTarget))),i("change",".js-release-stack #tag-list",(e=>Ee(e.currentTarget))),a(".js-release-stack #filter-list-branches",(function(e){Ee(e)}));var Oe=Object.defineProperty;const De="<BRANCH>";function Fe(e){const t=e.closest(".js-rename-branch-form");let r=e.value;const n=r!==e.defaultValue&&""!==r,o=t.querySelector(".js-rename-branch-autocheck-message");if(o&&n){let e=!1;r=o.getAttribute("data-shell-safe-name")||De,r.includes("<")&&(e=!0);for(const e of t.querySelectorAll(".js-rename-branch-new-name"))e.textContent=r;r=o.getAttribute("data-shell-safe-name-with-remote")||`origin/${De}`,r.includes("<")&&(e=!0);for(const e of t.querySelectorAll(".js-rename-branch-new-name-with-remote"))e.textContent=r;const n=t.querySelector(".js-rename-branch-special-characters-documentation");n&&e&&(n.hidden=!1,n.removeAttribute("aria-hidden"))}}Oe(Fe,"name",{value:"updateRenameInstructions",configurable:!0}),i("auto-check-message-updated",".js-rename-branch-input",(function(e){Fe(e.currentTarget)}));const $e=(0,Object.defineProperty)((e=>{const t=document.querySelector(Be);if(t){const r=0===e.value.length;t.disabled=r}}),"name",{value:"toggleSubmit",configurable:!0}),Be='form.js-protected-branch-settings button[type="submit"]';a(Be,{add(){const e=document.getElementById("rule_field");e&&($e(e),e.addEventListener("input",(()=>$e(e))))}}),i("change",".js-template-repository-choice",(function(e){const t=e.target,r=t.checked&&""!==t.value,n=t.form;n.querySelector(".js-repository-auto-init-options").classList.toggle("has-removed-contents",r);const o=n.querySelectorAll(".js-template-repository-setting"),a=n.querySelectorAll(".js-template-repository-name-display");if(r){const e=t.closest(".js-template-repository-choice-container").querySelector(".js-template-repository-name"),r=t.getAttribute("data-owner"),o=n.querySelector(`.js-repository-owner-choice[value="${r}"]`);if(o instanceof HTMLInputElement)o.checked=!0,s(o,"change");else{const e=n.querySelector(".js-repository-owner-choice.js-repository-owner-is-viewer");e.checked=!0,s(e,"change")}for(const t of a)t.textContent=e.textContent}else for(const e of a)e.textContent="";for(const e of o)e.hidden=!r}));const We=q(w);b("keydown",".js-tree-finder-field",(e=>{"Escape"===e.key&&(e.preventDefault(),history.back())})),a(".js-tree-finder",(e=>{const t=e.querySelector(".js-tree-finder-field"),r=e.querySelector(".js-tree-finder-virtual-filter"),n=e.querySelector(".js-tree-browser"),o=e.querySelector(".js-tree-browser-results"),s=e.querySelector(".js-tree-browser-result-template"),a=new l(t,o);r.filter=(e,t)=>""===t||S(t,e)&&We(t,e)>0,r.addEventListener("virtual-filter-input-filter",(()=>{n.updating="lazy"})),r.addEventListener("virtual-filter-input-filtered",(()=>{n.updating="eager"})),n.addEventListener("virtual-list-sort",(e=>{e.preventDefault();const r=t.value;n.sort(((e,t)=>We(r,t)-We(r,e)))})),n.addEventListener("virtual-list-update",(()=>{a.stop()})),n.addEventListener("virtual-list-updated",(()=>{a.start(),a.navigate()})),n.addEventListener("virtual-list-render-item",(e=>{if(!(e instanceof CustomEvent))return;const t=new d(s,{item:e.detail.item,id:`entry-${Math.random().toString().substr(2,5)}`}),r=t.querySelector("marked-text");r&&(r.positions=v),e.detail.fragment.append(t)})),n.querySelector("ul").hidden=!1,t.focus(),a.start()}));var Ue=Object.defineProperty,Ne=(e,t)=>Ue(e,"name",{value:t,configurable:!0});let Xe=null;const ze=new WeakMap;function Ge(e,t){const r=e.closest(".js-upload-manifest-file-container").querySelector(".js-upload-progress");r.hidden=!1,e.classList.add("is-progress-bar");const n=r.querySelector(".js-upload-meter-text");n.querySelector(".js-upload-meter-range-start").textContent=String(t.uploaded()+1),n.querySelector(".js-upload-meter-range-end").textContent=String(t.size)}function Ve(e){e.classList.remove("is-progress-bar");const t=e.closest(".js-upload-manifest-file-container");t.querySelector(".js-upload-progress").hidden=!0,t.querySelector(".js-upload-meter-text .js-upload-meter-filename").textContent=""}function Je(){let e;return[new Promise((t=>{e=t})),e]}function Ke(e){Ve(e.currentTarget)}async function Qe(e){const t=e.getAttribute("data-redirect-url");try{await L(e.getAttribute("data-poll-url")),window.location.href=t}catch(e){document.querySelector(".js-manifest-ready-check").hidden=!0,document.querySelector(".js-manifest-ready-check-failed").hidden=!1}}Ne(Ge,"showProgress"),Ne(Ve,"hideProgress"),i("file-attachment-accept",".js-upload-manifest-file",(function(e){const{attachments:t}=e.detail,r=parseInt(e.currentTarget.getAttribute("data-directory-upload-max-files")||"",10);t.length>r&&(e.preventDefault(),e.currentTarget.classList.add("is-too-many"))})),i("document:drop",".js-upload-manifest-tree-view",(async function(e){const{transfer:t}=e.detail,r=e.currentTarget,n=await u.traverse(t,!0),o=document.querySelector("#js-repo-pjax-container");o.addEventListener("pjax:success",(()=>{o.querySelector(".js-upload-manifest-file").attach(n)}),{once:!0});const s=r.getAttribute("data-drop-url");k({url:s,container:o})})),i("upload:setup",".js-upload-manifest-file",(async function(e){const{batch:t,form:r,preprocess:n}=e.detail,o=e.currentTarget;function s(){r.append("upload_manifest_id",ze.get(o))}if(Ge(o,t),Ne(s,"addInfo"),ze.get(o))return void s();if(Xe)return void n.push(Xe.then(s));const a=o.closest(".js-upload-manifest-file-container").querySelector(".js-upload-manifest-form");Xe=fetch(a.action,{method:a.method,body:new FormData(a),headers:{Accept:"application/json"}});const[i,c]=Je();n.push(i.then(s));const l=await Xe;if(!l.ok)return;const d=await l.json();document.querySelector(".js-manifest-commit-form").elements.namedItem("manifest_id").value=d.upload_manifest.id,ze.set(o,d.upload_manifest.id),Xe=null,c()})),Ne(Je,"makeDeferred"),i("upload:start",".js-upload-manifest-file",(function(e){const{attachment:t,batch:r}=e.detail,n=e.currentTarget.closest(".js-upload-manifest-file-container").querySelector(".js-upload-progress").querySelector(".js-upload-meter-text");n.querySelector(".js-upload-meter-range-start").textContent=r.uploaded()+1,n.querySelector(".js-upload-meter-filename").textContent=t.fullPath})),i("upload:complete",".js-upload-manifest-file",(function(e){const{attachment:t,batch:r}=e.detail,n=document.querySelector(".js-manifest-commit-file-template").querySelector(".js-manifest-file-entry").cloneNode(!0);n.querySelector(".js-filename").textContent=t.fullPath;const o=t.id;n.querySelector(".js-remove-manifest-file-form").elements.namedItem("file_id").value=o;const s=document.querySelector(".js-manifest-file-list");s.hidden=!1,e.currentTarget.classList.add("is-file-list"),s.querySelector(".js-manifest-file-list-root").appendChild(n),r.isFinished()&&Ve(e.currentTarget)})),i("upload:progress",".js-upload-manifest-file",(function(e){const{batch:t}=e.detail;e.currentTarget.closest(".js-upload-manifest-file-container").querySelector(".js-upload-meter").style.width=`${t.percent()}%`})),Ne(Ke,"onerror"),i("upload:error",".js-upload-manifest-file",Ke),i("upload:invalid",".js-upload-manifest-file",Ke),c(".js-remove-manifest-file-form",(async function(e,t){await t.html();const r=e.closest(".js-manifest-file-list-root");e.closest(".js-manifest-file-entry").remove(),r.hasChildNodes()||(r.closest(".js-manifest-file-list").hidden=!0,document.querySelector(".js-upload-manifest-file").classList.remove("is-file-list"))})),Ne(Qe,"manifestReadyCheck"),a(".js-manifest-ready-check",{initialize(e){Qe(e)}});var Ye=Object.defineProperty,Ze=(e,t)=>Ye(e,"name",{value:t,configurable:!0});function et(e){return e.closest("form").querySelector("#release_id").value}i("click",".js-release-remove-file",(function(e){const t=e.currentTarget.closest(".js-release-file");t.classList.add("delete"),t.querySelector("input.destroy").value="true"})),i("click",".js-release-undo-remove-file",(function(e){const t=e.currentTarget.closest(".js-release-file");t.classList.remove("delete"),t.querySelector("input.destroy").value=""})),Ze(et,"getReleaseId");let tt=null;function rt(e,t){t.append("release_id",et(e));const r=Array.from(document.querySelectorAll(".js-releases-field .js-release-file.delete .id"));if(r.length){const e=r.map((e=>e.value));t.append("deletion_candidates",e.join(","))}}i("release:saved",".js-release-form",(function(e){const t=e.currentTarget;tt=null;let r=!1;for(const e of t.querySelectorAll(".js-releases-field .js-release-file"))e.classList.contains("delete")?e.remove():e.classList.contains("js-template")||(r=!0);const n=t.querySelector(".js-releases-field");n.classList.toggle("not-populated",!r),n.classList.toggle("is-populated",r)})),Ze(rt,"addInfo"),i("upload:setup",".js-upload-release-file",(function(e){const{form:t,preprocess:r}=e.detail,n=e.currentTarget;if(et(n))return void rt(n,t);if(!tt){const e=document.querySelector(".js-save-draft");tt=le(e)}const o=rt.bind(null,n,t);r.push(tt.then(o))})),i("upload:start",".js-upload-release-file",(function(e){const t=e.detail.policy;e.currentTarget.querySelector(".js-upload-meter").classList.remove("d-none");const r=t.asset.replaced_asset;if(r)for(const e of document.querySelectorAll(".js-releases-field .js-release-file .id"))Number(e.value)===r&&e.closest(".js-release-file").remove()})),i("upload:complete",".js-upload-release-file",(function(e){const{attachment:t}=e.detail,r=document.querySelector(".js-releases-field"),n=r.querySelector(".js-template").cloneNode(!0);n.classList.remove("d-none","js-template"),n.querySelector("input.id").value=t.id;const o=t.name||t.href.split("/").pop();for(const e of n.querySelectorAll(".js-release-asset-filename"))e instanceof HTMLInputElement?e.value=o:e.textContent=o;const s=`(${(t.file.size/1048576).toFixed(2)} MB)`;n.querySelector(".js-release-asset-filesize").textContent=s,r.appendChild(n),r.classList.remove("not-populated"),r.classList.add("is-populated"),e.currentTarget.querySelector(".js-upload-meter").classList.add("d-none")})),i("upload:progress",".js-upload-release-file",(function(e){const{attachment:t}=e.detail;e.currentTarget.querySelector(".js-upload-meter").style.width=`${t.percent}%`}));var nt=Object.defineProperty,ot=Object.getOwnPropertyDescriptor,st=(e,t,r,n)=>{for(var o,s=n>1?void 0:n?ot(t,r):t,a=e.length-1;a>=0;a--)(o=e[a])&&(s=(n?o(t,r,s):o(s))||s);return n&&s&&nt(t,r,s),s};let at=class extends HTMLElement{constructor(){super(...arguments),this.count=0}connectedCallback(){a("get-repo",{constructor:A,add:e=>{this.handleGetRepoElement(e)}})}handleGetRepoElement(e){!e.openOrCreateInCodespace||(0===this.count?e.showOpenOrCreateInCodespace():e.removeOpenOrCreateInCodespace())}};((e,t)=>{nt(e,"name",{value:"RepoCodespacesCountElement",configurable:!0})})(at),st([f],at.prototype,"count",2),at=st([n],at)}}}));
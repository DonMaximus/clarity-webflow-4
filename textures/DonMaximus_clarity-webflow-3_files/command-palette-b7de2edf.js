System.register(["./chunk-vendor.js","./chunk-prefetched-provider.js","./chunk-color-modes.js","./chunk-copy.js","./chunk-frameworks.js"],(function(){"use strict";var e,t,s,i,r,o,n,a,c,l,h,u,d,p,m,y,f,v,g,b,I,S,E,P,T,C;return{setters:[function(u){e=u.j,t=u.c,s=u.b,i=u.k,r=u.t,o=u.a0,n=u.l,a=u.ad,c=u.$,l=u.o,h=u.h},function(e){u=e.C,d=e.Q,p=e.s,m=e.c,y=e.P,f=e.i,v=e.I,g=e.S,b=e.R},function(e){I=e.s,S=e.a,E=e.g},function(e){P=e.c},function(e){T=e.c,C=e.P}],execute:function(){var k=Object.defineProperty,x=Object.getOwnPropertyDescriptor,w=(e,t,s,i)=>{for(var r,o=i>1?void 0:i?x(t,s):t,n=e.length-1;n>=0;n--)(r=e[n])&&(o=(i?r(t,s,o):r(o))||o);return i&&o&&k(t,s,o),o};let j=class extends HTMLElement{constructor(){super(...arguments),this.scopeTypes=""}active(e,t){return this.scopeTypeMatch(e.type)&&this.modeMatch(t)}scopeTypeMatch(e){return!this.scopeTypes||this.scopeTypes&&JSON.parse(this.scopeTypes).includes(e)}modeMatch(e){return"*"===this.char||this.char===e}character(){return"*"===this.char?"":this.char}};k(j,"name",{value:"CommandPaletteModeElement",configurable:!0}),w([e],j.prototype,"char",2),w([e],j.prototype,"placeholder",2),w([e],j.prototype,"scopeTypes",2),j=w([t],j);var q=Object.defineProperty,M=Object.getOwnPropertyDescriptor,D=(e,t,s,i)=>{for(var r,o=i>1?void 0:i?M(t,s):t,n=e.length-1;n>=0;n--)(r=e[n])&&(o=(i?r(t,s,o):r(o))||o);return i&&o&&q(t,s,o),o};const L="*";let O=class extends HTMLElement{constructor(){super(...arguments),this.type=L,this.mode=L,this.matchMode="",this.value=L,this.onEmpty=!1,this.onError=!1}connectedCallback(){this.hidden=!0}toggle(e,t=!1,s=!1){const i=this.valueMatch(e.text)&&this.scopeTypeMatch(e.scope.type)&&this.modeMatch(e.mode)&&this.showOnEmpty(t)&&this.showOnError(s);this.hidden=!i}valueMatch(e){return this.value===L||this.value===e}scopeTypeMatch(e){return this.type===L||this.type===e}modeMatch(e){if(""===this.matchMode)return this.mode===L||this.mode===e;{const t=new RegExp(this.matchMode);return null!==e.match(t)}}showOnEmpty(e){return!this.onEmpty||e}showOnError(e){return!this.onError||e}};q(O,"name",{value:"CommandPaletteTipElement",configurable:!0}),D([e],O.prototype,"type",2),D([e],O.prototype,"mode",2),D([e],O.prototype,"matchMode",2),D([e],O.prototype,"value",2),D([e],O.prototype,"onEmpty",2),D([e],O.prototype,"onError",2),O=D([t],O);var A=Object.defineProperty,H=Object.getOwnPropertyDescriptor,_=(e,t,s,i)=>{for(var r,o=i>1?void 0:i?H(t,s):t,n=e.length-1;n>=0;n--)(r=e[n])&&(o=(i?r(t,s,o):r(o))||o);return i&&o&&A(t,s,o),o};let B=class extends HTMLElement{constructor(){super(...arguments),this.type="",this.id="",this.text="",this.value=""}};((e,t)=>{A(e,"name",{value:"CommandPaletteTokenElement",configurable:!0})})(B),_([e],B.prototype,"type",2),_([e],B.prototype,"id",2),_([e],B.prototype,"text",2),_([e],B.prototype,"value",2),B=_([t],B);var $=Object.defineProperty,F=Object.getOwnPropertyDescriptor,G=(e,t,s,i)=>{for(var r,o=i>1?void 0:i?F(t,s):t,n=e.length-1;n>=0;n--)(r=e[n])&&(o=(i?r(t,s,o):r(o))||o);return i&&o&&$(t,s,o),o};let R=class extends HTMLElement{constructor(){super(...arguments),this.topGroupThreshold=6.5,this.maxHeightVh=65,this.showDebugInfo=!1,this.octicons={},this.tryDefaultSelection=!1,this.eventListenersBound=!1,this.currentHeight=0,this.items={},this.history={}}connectedCallback(){this.classList.add("rounded-bottom-2")}get selectedItem(){return this.findSelectedElement()}set selectedItem(e){const t=this.findSelectedElement();t&&(t.selected=!1),e&&(e.selected=!0,this.selectedItemChanged(e.item))}get selectedItemIsTopResult(){var e;const t=this.findGroup(u.topGroupId);return!!(t&&t.itemNodes.length>0)&&t.firstItem.itemId===(null==(e=this.selectedItem)?void 0:e.itemId)}findSelectedElement(){return this.querySelector("command-palette-item[data-selected]")}navigate(e){var t,s;this.tryDefaultSelection=!1;const i=e>0,r={behavior:"smooth",block:"nearest"};if(this.selectedItem){let o;if(o=i?null==(t=this.selectedItem)?void 0:t.nextElementSibling:null==(s=this.selectedItem)?void 0:s.previousElementSibling,o)this.selectedItem=o,this.selectedItem.scrollIntoView(r);else if(this.selectedItem){const t=this.visibleGroups[this.calculateIndex(e)];t.scrollIntoView(r),this.selectedItem=i?t.firstItem:t.lastItem}}else this.selectedItem=this.firstItem}calculateIndex(e){var t;let s=this.visibleGroups.findIndex((e=>{var t;return e.groupId===(null==(t=this.selectedItem)?void 0:t.item.group)}));(null==(t=this.findGroup(u.topGroupId))?void 0:t.firstItem)===this.selectedItem&&(s=0);const i=s+e,r=this.visibleGroups.length;return(i%r+r)%r}historyItems(e){return this.history[e]||(this.history[e]={}),this.history[e]}addItemToHistory(e,t,s){const i=this.historyItems(t),r=s.calculateScore(e);i[s.id]=r}addItems(e,t,s=!1){for(const i of t)this.addItemToHistory(e.text,e.path,i),this.items[i.id]=i,s&&this.prefillHistory(i,e);i(this.renderCurrentItems.bind(this),this.debounceWait)()}removeItem(e){return delete this.items[e.id]}removeItems(e){const t=e.map((e=>({item:e,removed:this.removeItem(e)})));return i(this.renderCurrentItems.bind(this),this.debounceWait)(),t}prefillHistory(e,t){for(const s of e.matchFields){const i=15,r=Math.min(s.length,i);for(let i=0;i<=r;i++){const r=s.slice(0,i);this.addItemToHistory(r,t.buildPath(t,r),e)}}}get debounceWait(){return 16}renderCurrentItems(){const e=this.getQuery().immutableCopy();this.currentPath!==e.path&&this.reset();const t=[...this.currentItems];if(e.isPresent()&&t.length>0){const s=this.findGroup(u.topGroupId);for(let i=0;s&&i<s.limit;i++){const s=t[i],r=s.calculateScore(e.queryText),o=s.priority+r;s&&o>this.topGroupThreshold&&this.renderItem(t.shift(),u.topGroupId)}}this.renderItems(t),this.updateSelectedItem(),this.itemsUpdated()}itemsUpdated(){const e=new CustomEvent("itemsUpdated",{cancelable:!0,detail:{items:this.currentItems,queryPath:this.getQuery().immutableCopy().path}});return this.dispatchEvent(e)}selectedItemChanged(e){const t=new CustomEvent("selectedItemChanged",{bubbles:!0,cancelable:!0,detail:{item:e,isDefaultSelection:this.tryDefaultSelection}});return this.dispatchEvent(t)}renderItems(e){for(const t of e)this.renderItem(t,t.group);this.setGroupBorders(),this.setMaxHeight()}get maximumHeight(){const e=.5*window.innerHeight;return Math.min(e,475)}get innerContentHeight(){let e=0;for(const t of this.children){const s=t,i=getComputedStyle(s),r=parseInt(i.marginTop.replace("px",""),10),o=parseInt(i.marginBottom.replace("px",""),10),n=s.offsetHeight+r+o;s.offsetHeight>0&&(e+=n)}return e}setMaxHeight(){const e=.6*this.maximumHeight,t=Math.round(Math.min(this.maximumHeight,this.innerContentHeight));Math.abs(this.currentHeight-t)>e?this.classList.add("no-transition"):this.classList.remove("no-transition"),this.setAttribute("style",`max-height:${t}px; min-height:${t}px;`),this.currentHeight=t}setGroupBorders(){if(this.visibleGroups.length>0){this.visibleGroups[0].classList.remove("border-top");for(const e of this.visibleGroups)0===this.visibleGroups.indexOf(e)?(e.classList.remove("border-top"),e.header&&(e.classList.remove("py-2"),e.classList.add("mb-2","mt-3"))):(e.classList.add("border-top"),e.header&&(e.classList.remove("mb-2","mt-3"),e.classList.add("py-2")))}}renderItem(e,t){var s;const i=this.findGroup(t);if(!i||(i.hasItem(e)||i.atLimit||(null==(s=this.topGroup)?void 0:s.hasItem(e)))&&!(null==i?void 0:i.topGroup))return;const r=e.render(!1,this.getQuery().immutableCopy().queryText);if(this.showDebugInfo&&(r.score=e.score),i.push(r),r.containerElement){const t=i.list.children.length.toString();e.position=t}if(e.icon)if("octicon"===e.icon.type){const t=this.octicons[e.icon.id],s=this.octicons["dash-color-fg-muted"];r.renderOcticon(t||s)}else"avatar"===e.icon.type&&r.renderAvatar(e.icon.url,e.icon.alt);else r.iconElement.hidden=!0;r.addEventListener("mousemove",(e=>{(0!==e.movementX||0!==e.movementY)&&this.selectedItem!==r&&(this.tryDefaultSelection=!1,this.selectedItem=r)}))}findGroup(e){return this.groups.find((t=>t.groupId===e))}get topGroup(){return this.findGroup(u.topGroupId)}get groupIds(){return this.groups.map((e=>e.groupId))}updateSelectedItem(){this.isSelectedItemInvalid()&&this.clearSelection(),this.setDefaultSelection()&&(this.selectedItem=this.firstItem)}setDefaultSelection(){const e=this.getQuery().hasScope()||this.getQuery().isPresent();return this.tryDefaultSelection&&e}noItemSelected(){return!this.selectedItem||this.isSelectedItemInvalid()}isSelectedItemInvalid(){return!this.currentItems.some((e=>{var t;return e.id===(null==(t=this.selectedItem)?void 0:t.itemId)}))}isEmpty(){return!this.currentItems||0===this.currentItems.length}clearSelection(){this.selectedItem=void 0}clear(){this.history={},this.items={},this.reset()}reset(){this.tryDefaultSelection=!0,this.currentPath=this.getQuery().immutableCopy().path;for(const e of this.groups)e.prepareForNewItems()}clearItemsFor(e){const t=this.groups.filter((t=>e.includes(t.groupId)));for(const e of t)e.prepareForNewItems();const s=Object.values(this.items).filter((t=>e.includes(t.group)));this.removeItems(s)}get visibleGroups(){return this.groups.filter((e=>!e.hidden))}get firstItem(){const e=this.visibleGroups;if(e.length>0)return e[0].querySelector("command-palette-item")}get currentItems(){const e=this.getQuery().immutableCopy(),t=this.historyItems(e.path),s=Object.entries(t).map((([e,s])=>{const i=this.items[e];return i?(i.score=s,i):(delete t[e],null)})).filter((e=>null!==e));return s?e.isBlank()?s.sort(((e,t)=>t.priority-e.priority)):s.sort(((e,t)=>t.score-e.score||t.priority-e.priority)):[]}disconnectedCallback(){this.unbindListeners()}bindListeners(){this.eventListenersBound||(window.addEventListener("resize",this.setMaxHeight.bind(this)),this.eventListenersBound=!0)}unbindListeners(){window.removeEventListener("resize",this.setMaxHeight.bind(this)),this.eventListenersBound=!1}};((e,t)=>{$(e,"name",{value:"CommandPaletteItemStackElement",configurable:!0})})(R),G([e],R.prototype,"topGroupThreshold",2),G([e],R.prototype,"maxHeightVh",2),G([e],R.prototype,"showDebugInfo",2),G([s],R.prototype,"groups",2),R=G([t],R);var W=Object.defineProperty;class N extends HTMLElement{async fetchWithDebounce(e,t){return this._lastFetchQuery=e,await this.delay(this.provider.debounce),this._lastFetchQuery!==e?{results:[]}:this.provider.fetch(e,t)}delay(e){return new Promise((t=>setTimeout(t,e)))}}((e,t)=>{W(e,"name",{value:"ProviderElement",configurable:!0})})(N);var U=Object.defineProperty,K=Object.getOwnPropertyDescriptor,Q=(e,t,s,i)=>{for(var r,o=i>1?void 0:i?K(t,s):t,n=e.length-1;n>=0;n--)(r=e[n])&&(o=(i?r(t,s,o):r(o))||o);return i&&o&&U(t,s,o),o};let V=class extends N{static build(e,t){const s=new V;return s.providerId=e,s.provider=t,s}};((e,t)=>{U(e,"name",{value:"ClientDefinedProviderElement",configurable:!0})})(V),Q([e],V.prototype,"providerId",2),V=Q([t],V);var z=Object.defineProperty,J=Object.getOwnPropertyDescriptor,X=Object.getOwnPropertySymbols,Y=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable,ee=(e,t,s)=>t in e?z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,te=(e,t)=>{for(var s in t||(t={}))Y.call(t,s)&&ee(e,s,t[s]);if(X)for(var s of X(t))Z.call(t,s)&&ee(e,s,t[s]);return e},se=(e,t)=>z(e,"name",{value:t,configurable:!0}),ie=(e,t,s,i)=>{for(var r,o=i>1?void 0:i?J(t,s):t,n=e.length-1;n>=0;n--)(r=e[n])&&(o=(i?r(t,s,o):r(o))||o);return i&&o&&z(t,s,o),o};const re=se((()=>navigator.platform.match(/Mac/)),"isMac"),oe=re()?"metaKey":"ctrlKey",ne=re()?"Meta":"Control",ae=se((e=>e instanceof KeyboardEvent&&e[oe]),"isPlatformMetaKey");let ce=class extends HTMLElement{constructor(){super(...arguments),this.activated=!1,this.error=!1,this.query=new d("",""),this.requestsInProgress=[],this.setupComplete=!1,this.sessionId="",this.returnTo="",this.userId="",this.multiPageEnabled=!1,this.activationHotkey=`${ne}+k`,this.secondaryActivationHotkey="Alt+Meta+˚,Control+Alt+k",this.commandsModeHotkey="Meta+Shift+k,Control+K",this.memexActivationHotkey=`${ne}+p`}setup(){if(this.modes=Array.from(this.querySelectorAll("command-palette-mode")),this.defaultMode=this.querySelector(".js-command-palette-default-mode"),this.commandPaletteInput=this.querySelector("command-palette-input"),this.groups=this.querySelectorAll("command-palette-item-group"),this.multiPageEnabled||(this.itemStackElement=this.querySelector("command-palette-item-stack"),this.itemStackElement.getQuery=()=>this.query,this.itemStackElement.addEventListener("itemsUpdated",this.itemsUpdated.bind(this))),this.addEventListener("selectedItemChanged",(e=>{if(e instanceof CustomEvent){const t=e.detail.item,s=e.detail.isDefaultSelection;this.updateTypeahead(t,s)}})),this.octicons={},!this.multiPageEnabled){const e=this.querySelector(".js-command-local-provider-octicons");if(e){const t=Array.from(e.children).map((e=>({id:e.getAttribute("data-local-provider-octicon-id"),svg:e.innerHTML})));this.cacheIcons(t)}}this.commandPaletteInput.addEventListener("command-palette-input",this.onInput.bind(this)),this.commandPaletteInput.addEventListener("command-palette-select",this.onSelect.bind(this)),this.commandPaletteInput.addEventListener("command-palette-descope",this.onDescope.bind(this)),this.commandPaletteInput.addEventListener("command-palette-cleared",this.onInputClear.bind(this)),document.addEventListener("pjax:end",this.pjaxReset.bind(this)),new ResizeObserver((e=>{for(const t of e)this.commandPaletteInput.scopeElement.smallDisplay=t.contentRect.width<450})).observe(this),this.addEventListener("keydown",this.onKeydown.bind(this)),this.defaultOpen&&(this.manualToggle(!0),this.clearReturnToParams()),this.setupComplete=!0}connectedCallback(){this.setupComplete||this.setup()}clear(e=!0){if(this.clearProviderCaches(),this.multiPageEnabled||this.itemStackElement.clear(),e&&this.resetInput(),this.activated)return this.prefetchProviderData()}clearCommands(e=!0){if(this.clearCommandProviderCaches(),this.multiPageEnabled||this.itemStackElement.clearItemsFor(u.commandGroupIds),e&&this.resetInput(),this.activated)return this.prefetchProviderData({providers:this.commandsProviderElements})}resetInput(){this.commandPaletteInput.value="",this.commandPaletteInput.resetScopeIfNeeded()}activate(){if(this.sessionId=this.generateSessionId(),this.commandPaletteInput.scopeElement.smallDisplay=this.offsetWidth<450,this.commandPaletteInput.resetScopeIfNeeded(),this.commandPaletteInput.focus(),this.setActiveModeElement(),this.setQuery(),this.toggleTips(),this.prefetchProviderData(),this.updateOverlay(),this.multiPageEnabled)this.pageStack.currentPage.prefetch();else if(this.itemStackElement.bindListeners(),this.commandPaletteInput.hasScope()){const e=new d(this.query.queryText,this.query.queryMode,{subjectId:this.query.subjectId,subjectType:this.query.subjectType,returnTo:this.query.returnTo});this.prefetchProviderData({query:e})}this.activated=!0,p("session_initiated")}deactivate(){this.activated=!1,this.multiPageEnabled||(this.itemStackElement.clearSelection(),this.itemStackElement.unbindListeners()),this.previouslyActiveElement&&this.previouslyActiveElement.focus(),p("session_terminated")}generateSessionId(){return m(`${Date.now()}_${this.userId}_${this.query.path}`).toString()}manualToggle(e){const t=this.closest("details");e?t.open=!0:t.removeAttribute("open")}dismiss(){this.manualToggle(!1)}get subjectId(){var e;return(null==(e=this.pjaxMeta)?void 0:e.getAttribute("data-subject-id"))||""}get subjectType(){var e;return(null==(e=this.pjaxMeta)?void 0:e.getAttribute("data-subject-type"))||""}get pjaxMeta(){return document.querySelector(".js-command-palette-pjax-meta-data")}pjaxReset(){this.activated=!1,this.clear(!0)}onInput(){this.commandPaletteInput.typeahead="",this.setActiveModeElement(),this.setQuery(),this.activated&&this.fetchProviderData(),this.multiPageEnabled||this.itemStackElement.updateSelectedItem(),this.toggleTips(),this.updateOverlay()}updateOverlay(){const e=this.getMode();this.commandPaletteInput.overlay=e;for(const t of this.groups)t.renderElement(e);if(e&&""===this.getTextWithoutMode()){const e=this.getModeElement().placeholder||"";this.commandPaletteInput.showModePlaceholder(e)}else this.commandPaletteInput.showModePlaceholder("")}itemsUpdated(e){if(!(e instanceof CustomEvent))return;const t=e.detail.items.filter((e=>e.group!==u.footerGroupId)),s=t.filter((e=>!u.helpGroupIds.includes(e.group))),i=t.length>s.length,r=this.finishedLoading&&0===s.length&&this.activated;s.length>0?this.toggleEmptyState(!1,i):r&&(this.toggleEmptyState(!0,i),this.toggleTips()),this.toggleErrorTips()}setActiveModeElement(){const e=this.commandPaletteInput.value.substring(0,1),t=this.modes.filter((t=>t.active(this.query.scope,e))).find((t=>t.character()===e));this.activeMode=t||this.defaultMode,this.multiPageEnabled&&(this.pageStack.currentMode=this.activeMode.character())}setQuery(){this.query=new d(this.getTextWithoutMode().trimStart(),this.getMode(),{scope:this.commandPaletteInput.scope,subjectId:this.subjectId,subjectType:this.subjectType,returnTo:this.returnTo}),this.multiPageEnabled&&(this.pageStack.currentQueryText=this.getTextWithoutMode().trimStart())}getModeElement(){return this.activeMode}getMode(){return this.getModeElement().character()}getTextWithoutMode(){if(!this.commandPaletteInput)return"";const e=this.commandPaletteInput.value,t=this.getMode();return t&&e.startsWith(t)?e.substring(1):e}get selectedItem(){return this.multiPageEnabled?this.pageStack.currentPage.selectedItem:this.itemStackElement.selectedItem}onSelect(e){this.selectedItem?this.selectedItem.item.scope?this.setScope(this.selectedItem.item.scope):this.selectedItem.item.autocomplete(this):e.preventDefault()}setScope(e){if(this.multiPageEnabled){const t=e||this.commandPaletteInput.scope;for(const e of t.tokens){const s=e===t.tokens[t.tokens.length-1];this.pageStack.push({title:e.value,scopeId:e.id,scopeType:e.type,hidden:!s})}this.commandPaletteInput.value=""}else this.itemStackElement.clearSelection(),this.commandPaletteInput.value="",e&&(this.commandPaletteInput.scope=e),this.setQueryScope(),this.toggleTips(),this.prefetchProviderData()}onDescope(){if(this.multiPageEnabled)this.pageStack.pop();else if(this.commandPaletteInput.hasScope()){const e=this.commandPaletteInput.value;this.commandPaletteInput.removeToken(),this.setScope(),this.commandPaletteInput.setRemovedTokenAndSelect(e)}}onInputClear(){this.commandPaletteInput.clearScope(),this.setScope()}onKeydown(e){var t;"Enter"===e.key&&this.selectedItem?(null==(t=this.selectedItem)||t.item.activate(this,e),e.preventDefault(),e.stopPropagation()):"ArrowDown"===e.key?(this.navigateToItem(1),e.preventDefault(),e.stopPropagation()):"ArrowUp"===e.key?(this.navigateToItem(-1),e.preventDefault(),e.stopPropagation()):this.isCopyEvent(e)&&this.selectedItem&&(this.selectedItem.item.copy(this),e.preventDefault(),e.stopPropagation())}navigateToItem(e){this.multiPageEnabled?this.pageStack.navigate(e):this.itemStackElement.navigate(e)}toggleTips(){for(const e of this.modeTips)e.toggle(this.query);this.finishedLoading&&!this.multiPageEnabled&&this.itemStackElement.setMaxHeight()}toggleEmptyState(e,t){for(const t of this.emptyStateElements)t.toggle(this.query,e);if(!t&&e){const e=this.serverDefinedProviderElements.find((e=>"help"===e.type));e&&this.fetchProviderData([e],{isEmpty:!0})}else t&&!e&&!this.multiPageEnabled&&this.itemStackElement.clearItemsFor(u.helpGroupIds);this.finishedLoading&&!this.multiPageEnabled&&this.itemStackElement.setMaxHeight()}toggleErrorTips(){for(const e of this.errorStateTips)e.toggle(this.query,!1,this.error)}updateTypeahead(e,t=!1){var s,i;""!==this.getTextWithoutMode()||e&&!t?e&&(this.commandPaletteInput.typeahead=null!=(i=null!=(s=e.typeahead)?s:e.title)?i:""):this.commandPaletteInput.typeahead=""}isCopyEvent(e){return!this.commandPaletteInput.textSelected()&&(re()?e.metaKey&&"c"===e.key:e.ctrlKey&&"c"===e.key)}setQueryScope(){this.query.scope=this.commandPaletteInput.scope}async prefetchProviderData(e={}){if(this.multiPageEnabled)return;const t={query:this.query,providers:this.providerElements},s=te(te({},t),e);await Promise.all(Array.from(s.providers).map((async e=>{const t=e.provider;if(t instanceof y){if(!t.scopeMatch(this.query))return;await t.prefetch(s.query.immutableCopy()),this.cacheIcons(t.octicons)}await this.fetchProviderData([e],{prefillItemStack:!0})})))}async fetchProviderData(e,t={}){if(this.multiPageEnabled)return;const s=te(te({},{prefillItemStack:!1,isEmpty:!1}),t),i=null!=e?e:this.providerElements;this.error=!1,await this.fetchWithSpinner(i.map((async e=>{if(!e.provider.enabledFor(this.query))return;const t=this.query.immutableCopy(),i=await e.fetchWithDebounce(t,s.isEmpty);i&&(i.error&&(this.error=!0,this.toggleErrorTips()),i.octicons&&this.cacheIcons(i.octicons)),this.multiPageEnabled||this.itemStackElement.addItems(t,i.results,s.prefillItemStack)})))}async fetchWithSpinner(e){this.requestsInProgress.push(e),this.commandPaletteInput.loading=!0,await Promise.all(e),this.requestsInProgress.splice(this.requestsInProgress.indexOf(e),1),this.commandPaletteInput.loading=this.requestsInProgress.length>0}get serverDefinedProviderElements(){const e=this.querySelectorAll("server-defined-provider");return Array.from(e)}get clientDefinedProviderElements(){const e=this.querySelectorAll("client-defined-provider");return Array.from(e)}get providerElements(){return[...this.serverDefinedProviderElements,...this.clientDefinedProviderElements]}get commandsProviderElements(){return this.providerElements.filter((e=>e.provider.hasCommands))}clearProviderCaches(){for(const e of this.providerElements)e.provider.clearCache()}clearCommandProviderCaches(){for(const e of this.commandsProviderElements)e.provider.clearCache()}registerProvider(e,t){const s=V.build(e,t);this.appendChild(s)}get tipElements(){const e=this.querySelectorAll("command-palette-tip");return Array.from(e)}get modeTips(){return this.tipElements.filter((e=>!e.onEmpty&&!e.onError))}get emptyStateElements(){return this.tipElements.filter((e=>e.onEmpty))}get errorStateTips(){return this.tipElements.filter((e=>e.onError))}get finishedLoading(){return 0===this.requestsInProgress.length}get placeholder(){return this.getAttribute("placeholder")||""}get defaultOpen(){return null!==this.getAttribute("data-default-open")}clearReturnToParams(){const e=new URLSearchParams(location.search);e.delete("command_palette_open"),e.delete("command_query"),e.delete("command_mode"),e.delete("clear_command_scope"),history.replaceState(null,"",`?${e}${location.hash}`)}cacheIcons(e){if(!this.multiPageEnabled)for(const t of e)this.itemStackElement.octicons[t.id]=t.svg}displayFlash(e,t,s=!1,i=5e3){const r=document.querySelector(".js-command-palette-toasts");if(!r)return;const o=r.querySelectorAll(".Toast");for(const e of o)e.hidden=!0;const n=r.querySelector(`.Toast.Toast--${e}`);if(!n)return;const a=n.querySelector(".Toast-content");s?a.innerHTML=t:a.textContent=t,n.hidden=!1,setTimeout((()=>{n.hidden=!0}),i)}};se(ce,"CommandPalette"),ce.tagName="command-palette",ie([e],ce.prototype,"returnTo",2),ie([e],ce.prototype,"userId",2),ie([e],ce.prototype,"multiPageEnabled",2),ie([e],ce.prototype,"activationHotkey",2),ie([e],ce.prototype,"secondaryActivationHotkey",2),ie([e],ce.prototype,"commandsModeHotkey",2),ie([e],ce.prototype,"memexActivationHotkey",2),ie([r],ce.prototype,"pageStack",2),ce=ie([t],ce);var le=Object.defineProperty;Object.getOwnPropertyDescriptor;let he=class extends v{render(e){return super.render(e,this.typeahead)}activate(e,t){t instanceof PointerEvent?super.activate(e,t):t instanceof KeyboardEvent&&this.activateLinkBehavior(e,t,ae(t))}get activateTrackingEventType(){return"access_policy_executed"}get key(){return this.title}getHint(){return o``}};((e,t)=>{le(e,"name",{value:"AccessPolicyItem",configurable:!0})})(he),he=((e,t,s,i)=>{for(var r,o=t,n=e.length-1;n>=0;n--)(r=e[n])&&(o=r(o)||o);return o})([f],he);var ue=Object.defineProperty;Object.getOwnPropertyDescriptor;let de=class extends v{static from(e){return new de({title:e.title,typeahead:e.title,priority:1,score:1,group:e.group,action:{type:"jump_to",description:"",path:e.path},icon:{type:"octicon",id:e.icon}})}render(e,t){return super.render(e,t)}activate(e,t){t instanceof PointerEvent?super.activate(e,t):t instanceof KeyboardEvent&&this.activateLinkBehavior(e,t,ae(t))}get activateTrackingEventType(){return this.newTabOpened?"jump_to_new_tab":"jump_to"}copy(e){super.copy(e);const t=new URL(this.action.path,window.location.origin);this.copyToClipboardAndAnnounce(t.toString())}get key(){return`${super.key}/${this.action.path}`}get action(){return this._action}};((e,t)=>{ue(e,"name",{value:"JumpToItem",configurable:!0})})(de),de=((e,t,s,i)=>{for(var r,o=t,n=e.length-1;n>=0;n--)(r=e[n])&&(o=r(o)||o);return o})([f],de);var pe=Object.defineProperty;class me extends y{async fetchSrc(e){if(!this.src)throw new Error("No src provided");const t=new URL(this.src,window.location.origin);t.search=e.params().toString();const s=await(await fetch(t.toString(),{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}})).json(),i=s.results[0];if(i.base_file_path){const e=i.base_file_path,t=i.paths;s.results=t.map((t=>de.from({title:t,path:`${e}/${t}`,icon:"file-color-fg-muted",group:"files"})))}else i.action&&"access_policy"===i.action.type?s.results=[new he(i)]:s.results=[];return s}async fetch(e,t=!1){const s=e.text.match(/(.+):(\d*)\s*$/);return s?this.fetchWithLineNumbers(e,s):super.fetch(e,t)}async fetchWithLineNumbers(e,t){const s=t[1],i=t[2],r=new d(s,e.mode,{scope:e.scope}),o=[],n=(await super.fetch(r,!1)).results;for(const e of n)e instanceof de&&o.push(this.convert(e,i));return{results:o}}convert(e,t){return""===t||!(e instanceof de)||(e.title=`${e.title}:${t}`,e.action.path=`${e.action.path}#L${t}`),e}}((e,t)=>{pe(e,"name",{value:"FilesProvider",configurable:!0})})(me);var ye=Object.defineProperty;class fe extends g{enabledFor(e){return!0}clearCache(){}get hasCommands(){return!1}get debounce(){return 0}async fetch(e,t=!1){return"?"===e.mode||t?{results:Array.from(this.element.querySelectorAll("command-palette-help")).filter((t=>t.show(e))).map(((e,t)=>e.toItem(t)))}:{results:[]}}}((e,t)=>{ye(e,"name",{value:"HelpProvider",configurable:!0})})(fe);var ve=Object.defineProperty;Object.getOwnPropertyDescriptor;let ge=class extends v{constructor(e){super(e)}static from(e){return new ge({title:e.title,subtitle:e.subtitle,typeahead:e.title,priority:11,score:1,group:"commands",action:{type:"main_window_command",command:e,path:""},icon:{type:"octicon",id:e.icon},hint:"Run command"})}activate(e){super.activate(e),this.action.command.run(e),e.clearProviderCaches(),e.dismiss(),e.itemStackElement.clear(),e.commandPaletteInput.value=""}get activateTrackingEventType(){return"command_executed"}isApplicable(e){return this.action.command.isApplicable(e)}select(){this.action.command.select()}deselect(){this.action.command.deselect()}get action(){return this._action}};((e,t)=>{ve(e,"name",{value:"MainWindowCommandItem",configurable:!0})})(ge),ge=((e,t,s,i)=>{for(var r,o=t,n=e.length-1;n>=0;n--)(r=e[n])&&(o=r(o)||o);return o})([f],ge);var be=Object.defineProperty;class Ie{static get item(){return ge.from(new this)}run(e){}isApplicable(e){return!0}select(){}deselect(){}}((e,t)=>{be(e,"name",{value:"MainWindowCommand",configurable:!0})})(Ie);var Se=Object.defineProperty,Ee=(e,t)=>Se(e,"name",{value:t,configurable:!0});class Pe extends Ie{constructor(){super(...arguments),this.title="Delete discussion…",this.icon="trash-color-fg-muted"}fetchDetails(){return document.querySelector("details.js-delete-discussion-details")}isApplicable(){return this.fetchDetails()instanceof HTMLDetailsElement}run(){const e=this.fetchDetails();e&&(e.open=!0,setTimeout((()=>{var t;null==(t=null==e?void 0:e.querySelector('button[type="submit"]'))||t.focus()}),0))}}Ee(Pe,"DeleteDiscussion");class Te extends Ie{constructor(){super(...arguments),this.title="Edit discussion body",this.icon="pencil-color-fg-muted"}get editButton(){return document.querySelector(".js-discussions-comment-edit-button")}isApplicable(){return null!=this.editButton}run(){var e;null==(e=this.editButton)||e.click()}}Ee(Te,"EditDiscussion");class Ce extends Ie{constructor(){super(...arguments),this.title="Transfer discussion…",this.icon="arrow-right-color-fg-muted"}fetchDetails(){return document.querySelector("details.js-transfer-discussion-details")}isApplicable(){return this.fetchDetails()instanceof HTMLDetailsElement}run(){var e;const t=this.fetchDetails();if(t){const s=Ee((()=>{setTimeout((()=>{var e;null==(e=null==t?void 0:t.querySelector("[data-menu-button]"))||e.focus()}),0)}),"focusMenu");null==(e=t.querySelector("include-fragment"))||e.addEventListener("load",s),t.open=!0,s()}}}Ee(Ce,"TransferDiscussion");var ke=[Pe,Ce,Te],xe=Object.defineProperty,we=(e,t)=>xe(e,"name",{value:t,configurable:!0});class je extends Ie{constructor(){super(...arguments),this.title="Open in github.dev editor",this.icon="codespaces-color-fg-muted"}isApplicable(){return this.fetchLink()instanceof HTMLAnchorElement}fetchLink(){return document.querySelector(".js-github-dev-shortcut")}run(){var e;null==(e=this.fetchLink())||e.click()}}we(je,"OpenInDotDev");class qe extends Ie{constructor(){super(...arguments),this.title="Switch theme to default dark",this.icon="moon-color-fg-muted",this.mode="dark",this.theme="dark"}select(){this.loadStyles(this.theme)}applyTheme(){this.loadStyles(this.theme),"auto"!==this.mode&&I(this.theme,this.mode),S(this.mode)}async run(){this.applyTheme(),this.saveSettings(this.mode,this.lightTheme,this.darkTheme)}async saveSettings(e=this.mode,t,s){const i=document.querySelector(".js-color-mode-csrf").value,r=document.querySelector(".js-color-mode-path").value,o=new FormData;o.set("color_mode",e),t&&o.set("light_theme",t),s&&o.set("dark_theme",s);const n=await(await fetch(r,{method:"PUT",body:o,mode:"same-origin",headers:{"Scoped-CSRF-Token":i,"X-Requested-With":"XMLHttpRequest"}})).json();this.loadStyles(n.light_theme),this.loadStyles(n.dark_theme),I(n.light_theme,"light"),I(n.dark_theme,"dark"),S(n.color_mode)}loadStyles(e){const t=document.querySelector(`link[data-color-theme='${e}']`);t&&!t.hasAttribute("href")&&t.hasAttribute("data-href")&&t.setAttribute("href",t.getAttribute("data-href"))}get darkTheme(){return"dark"===this.mode?this.theme:E("dark")}get lightTheme(){return"light"===this.mode?this.theme:E("light")}}we(qe,"SwitchToDark");class Me extends qe{constructor(){super(...arguments),this.title="Switch theme to dark high contrast",this.theme="dark_high_contrast"}}we(Me,"SwitchToDarkHighConstrast");class De extends qe{constructor(){super(...arguments),this.title="Switch theme to dark dimmed",this.theme="dark_dimmed"}}we(De,"SwitchToDarkDimmed");class Le extends qe{constructor(){super(...arguments),this.title="Switch theme to default light",this.icon="sun-color-fg-muted",this.mode="light",this.theme="light"}}we(Le,"SwitchToLight");class Oe extends qe{constructor(){super(...arguments),this.title="Switch theme settings to sync with system",this.icon="sun-color-fg-muted",this.mode="auto"}get darkTheme(){}get lightTheme(){}}we(Oe,"SwitchToAuto");class Ae extends Ie{constructor(){super();const e=this.isSubscribe();this.title=e?"Subscribe":"Unsubscribe",this.icon=(e?"bell":"bell-slash")+"-color-fg-muted"}isApplicable(){var e;return this.fetchButton()instanceof HTMLButtonElement&&!1===(null==(e=this.fetchButton())?void 0:e.disabled)}isSubscribe(){var e,t;return"Subscribe"===(null==(t=null==(e=this.fetchButton())?void 0:e.textContent)?void 0:t.trim())}fetchButton(){return document.querySelector(".thread-subscribe-button")}run(){var e;null==(e=this.fetchButton())||e.click()}}we(Ae,"UpdateSubscription");var He=[je,Le,qe,De,Me,Oe,Ae],_e=Object.defineProperty,Be=(e,t)=>_e(e,"name",{value:t,configurable:!0});function $e(e){e.focus(),e.selectionStart=e.selectionEnd=e.value.length}Be($e,"moveCursorToEnd");class Fe extends Ie{constructor(){super(...arguments),this.title="Edit issue body",this.icon="pencil-color-fg-muted"}run(){const e=document.createElement("button");e.hidden=!0,e.classList.add("js-comment-edit-button");const t=document.querySelector("div.js-comment");null==t||t.appendChild(e),e.click(),e.remove(),setTimeout((()=>{var e;const s=null==(e=null==t?void 0:t.parentElement)?void 0:e.querySelector("textarea.js-comment-field");s&&$e(s)}),0)}}Be(Fe,"EditIssueBody");class Ge extends Ie{constructor(){super(...arguments),this.title="Edit issue title",this.icon="pencil-color-fg-muted"}isApplicable(){return this.fetchButton()instanceof HTMLButtonElement}fetchButton(){return document.querySelector(".js-title-edit-button")}run(){var e;null==(e=this.fetchButton())||e.click(),setTimeout((()=>{const e=document.querySelector("input#issue_title[autofocus]");e&&$e(e)}),0)}}Be(Ge,"EditIssueTitle");class Re extends Ie{constructor(){super(...arguments),this.title="Transfer issue…",this.icon="arrow-right-color-fg-muted"}isApplicable(){return this.fetchDetails()instanceof HTMLDetailsElement}fetchDetails(){return document.querySelector("details.js-transfer-issue")}run(){var e;const t=this.fetchDetails();if(t){const s=Be((()=>{setTimeout((()=>{var e;null==(e=t.querySelector("[data-menu-button]"))||e.focus()}),0)}),"focusMenu");null==(e=t.querySelector("include-fragment"))||e.addEventListener("load",s),t.open=!0,s()}}}Be(Re,"TransferIssue");class We extends Ie{constructor(){super();const e=this.isLock();this.title=(e?"Lock":"Unlock")+" issue",this.icon=(e?"lock":"key")+"-color-fg-muted"}isApplicable(){return this.fetchDetails()instanceof HTMLDetailsElement}isLock(){var e,t;return"Lock conversation"===(null==(t=null==(e=document.querySelector("summary.lock-toggle-link"))?void 0:e.textContent)?void 0:t.trim())}fetchDetails(){return document.querySelector("details.js-lock-issue")}run(){const e=this.fetchDetails();e&&(e.open=!0,setTimeout((()=>{var e;null==(e=document.querySelector("#unlock-reason"))||e.focus()}),0))}}Be(We,"LockIssue");class Ne extends Ie{constructor(){super(...arguments),this.title="Delete issue…",this.icon="trash-color-fg-muted"}isApplicable(){return this.fetchDetails()instanceof HTMLDetailsElement}fetchDetails(){return document.querySelector("details.js-delete-issue")}run(){const e=this.fetchDetails();e&&(e.open=!0,setTimeout((()=>{var t;null==(t=e.querySelector('button[type="submit"]'))||t.focus()}),0))}}Be(Ne,"DeleteIssue");class Ue extends Ie{constructor(){super(...arguments),this.title="Convert issue to discussion…",this.icon="comment-discussion-color-fg-muted"}isApplicable(){return this.fetchDetails()instanceof HTMLDetailsElement}fetchDetails(){return document.querySelector("details.js-convert-to-discussion")}run(){var e;const t=this.fetchDetails();if(t){const s=Be((()=>{setTimeout((()=>{var e;null==(e=t.querySelector("[data-menu-button]"))||e.focus()}),0)}),"focusMenu");null==(e=t.querySelector("include-fragment"))||e.addEventListener("load",s),t.open=!0,s()}}}Be(Ue,"ConvertToDiscussion");var Ke=[Ge,Fe,We,Re,Ne,Ue],Qe=Object.defineProperty;class Ve extends Ie{constructor(){super(...arguments),this.title="Open in new codespace",this.icon="codespaces-color-fg-muted"}isApplicable(){const e=this.fetchElements();return!!(e.codeModal&&e.codespacesForm&&e.newCodespacesButton&&e.codespacesTab)}run(){const{codeModal:e,codespacesTab:t,newCodespacesButton:s}=this.fetchElements();!(e&&t&&s)||(e.open=!0,t.click(),s instanceof HTMLButtonElement?s.click():(s.parentElement.open=!0,setTimeout((()=>{var e;null==(e=document.querySelector(".js-create-codespace-with-sku-button"))||e.focus()}),0)))}fetchElements(){const e=document.querySelector(".js-create-codespaces-form-command"),t=(null==e?void 0:e.closest("details"))||null,s=(null==t?void 0:t.querySelector('[data-tab="cloud"]'))||null,i=(null==e?void 0:e.querySelector('summary[role="button"], button[type="submit"]'))||null;return{codespacesForm:e,codeModal:t,codespacesTab:s,newCodespacesButton:i}}}((e,t)=>{Qe(e,"name",{value:"OpenCodespace",configurable:!0})})(Ve);var ze=Object.defineProperty,Je=(e,t)=>ze(e,"name",{value:t,configurable:!0});class Xe extends Fe{constructor(){super(...arguments),this.title="Edit pull request body"}}Je(Xe,"EditPullRequestBody");class Ye extends Ge{constructor(){super(...arguments),this.title="Edit pull request title"}}Je(Ye,"EditPullRequestTitle");class Ze extends Ie{constructor(){super(...arguments),this.title="Update current branch",this.icon="sync-color-fg-muted"}isApplicable(){return this.fetchButton()instanceof HTMLButtonElement}fetchButton(){return document.querySelector(".js-update-branch-form button")}run(){const e=this.fetchButton();e&&(e.scrollIntoView({behavior:"smooth",block:"center"}),e.click())}}Je(Ze,"UpdateBranch");class et extends Ie{constructor(){super(...arguments),this.title="Convert to draft",this.icon="git-pull-request-draft-color-fg-muted"}isApplicable(){return this.fetchButton()instanceof HTMLButtonElement}fetchButton(){return document.querySelector(".js-convert-to-draft")}run(){var e;const t=null==(e=this.fetchButton())?void 0:e.closest("details");t&&(t.open=!0,setTimeout((()=>{var e;null==(e=t.querySelector(".js-convert-to-draft"))||e.focus()}),0))}}Je(et,"ConvertToDraft");class tt extends Ie{constructor(){super(...arguments),this.title="Copy current branch name",this.icon="copy-color-fg-muted"}isApplicable(){return this.fetchClipboardCopy()instanceof n}fetchClipboardCopy(){return document.querySelector(".js-copy-branch")}async run(e){const t=this.fetchClipboardCopy();if(t instanceof n){const s=t.value;try{await P(s),e.displayFlash("success","Branch name copied to clipboard!")}catch(t){e.displayFlash("error","Unable to copy branch name to clipboard!")}}}}Je(tt,"CopyBranchName");var st=[tt,Ye,Xe,Ze,et,Ve],it=Object.defineProperty,rt=(e,t)=>it(e,"name",{value:t,configurable:!0});class ot extends Ie{constructor(){super(...arguments),this.title="Copy file permalink",this.icon="copy-color-fg-muted"}isApplicable(){return this.fetchPermalinkContainer()instanceof HTMLAnchorElement}fetchPermalinkContainer(){return document.querySelector(".js-permalink-shortcut")}async run(e){const t=this.fetchPermalinkContainer();if(t){const s=`${t.href}${window.location.hash}`;try{await P(s),e.displayFlash("success","Copied permalink!")}catch(t){e.displayFlash("error","Failed to copy permalink!")}}}}rt(ot,"CopyPermalink");class nt extends Ie{constructor(){super(...arguments),this.title="Clone repository: Copy HTTPS",this.icon="copy-color-fg-muted"}isApplicable(){return this.fetchClipboardCopy()instanceof n}fetchClipboardCopy(){return document.querySelector(".js-clone-url-http")}async run(e){const t=this.fetchClipboardCopy();if(t instanceof n){const s=t.value;try{await P(s),e.displayFlash("success","Clone URL copied!")}catch(t){e.displayFlash("error","Clone URL couldn't be copied")}}}}rt(nt,"CloneCopyHttps");class at extends Ie{constructor(){super(...arguments),this.title="Clone repository: Copy SSH",this.icon="copy-color-fg-muted"}isApplicable(){return this.fetchClipboardCopy()instanceof n}fetchClipboardCopy(){return document.querySelector(".js-clone-url-ssh")}async run(e){const t=this.fetchClipboardCopy();if(t instanceof n){const s=t.value;try{await P(s),e.displayFlash("success","Clone URL copied!")}catch(t){e.displayFlash("error","Clone URL couldn't be copied")}}}}rt(at,"CloneCopySsh");class ct extends Ie{constructor(){super(...arguments),this.title="Clone repository: Copy GitHub CLI",this.icon="copy-color-fg-muted"}isApplicable(){return this.fetchClipboardCopy()instanceof n}fetchClipboardCopy(){return document.querySelector(".js-clone-url-gh-cli")}async run(e){const t=this.fetchClipboardCopy();if(t instanceof n){const s=t.value;try{await P(s),e.displayFlash("success","Clone URL copied!")}catch(t){e.displayFlash("error","Clone URL couldn't be copied")}}}}rt(ct,"CloneCopyCli");var lt=[nt,at,ct,ot,Ve],ht=Object.defineProperty;class ut extends g{constructor(){super(...arguments),this.itemsByType={},this.everywhereItems=[],this.needsFetch=!0}enabledFor(e){return">"===e.mode}get hasCommands(){return!0}async fetch(e,t=!1){var s;this.loadCommandItems();const i=this.itemsForSubjectType(null!=(s=e.subjectType)?s:"");return{results:(e.isBlank()?i:this.fuzzyFilter(i,e)).filter((t=>t.isApplicable(e)))}}itemsForSubjectType(e){var t;return[...null!=(t=this.itemsByType[e])?t:[],...this.everywhereItems]}get debounce(){return 0}loadCommandItems(){this.needsFetch&&(this.itemsByType={Issue:Ke.map((e=>e.item)),PullRequest:st.map((e=>e.item)),Repository:lt.map((e=>e.item)),Discussion:ke.map((e=>e.item))},this.everywhereItems=He.map((e=>e.item)),this.needsFetch=!1)}clearCache(){this.needsFetch=!0}}((e,t)=>{ht(e,"name",{value:"MainWindowCommandsProvider",configurable:!0})})(ut);var dt=Object.defineProperty;Object.getOwnPropertyDescriptor;let pt=class extends de{static create(e){let t,s;if("repository"===e.scope.type)t=`in ${e.scope.text}`,s=`/${e.scope.text}/search?q=${e.text}`;else if("owner"===e.scope.type){const i=`org:${e.scope.text} ${e.text}`;t=`in ${e.scope.text}`,s=`/search?q=${i}`}else t="across all of GitHub",s=`/search?q=${e.text}`;return new pt({title:`Search ${e.text}${t}`,typeahead:"",priority:-10,score:-10,group:u.footerGroupId,action:{type:"jump_to",description:"",path:s},icon:{type:"octicon",id:"search-color-fg-muted"},titleScope:t})}constructor(e){super(e),this.titleScope=e.titleScope}render(e,t){const s=super.render(e,void 0);if(t){const e=[];e.push(document.createTextNode("Search"));const i=document.createElement("strong");i.textContent=` '${t}' `,e.push(i),e.push(document.createTextNode(this.titleScope)),s.titleNodes=e}return s}autocomplete(e){}calculateScore(e){return 0}};((e,t)=>{dt(e,"name",{value:"SearchLinkItem",configurable:!0})})(pt),pt=((e,t,s,i)=>{for(var r,o=t,n=e.length-1;n>=0;n--)(r=e[n])&&(o=r(o)||o);return o})([f],pt);var mt=Object.defineProperty;class yt extends g{enabledFor(e){return!(e.isBlank()||"?"===e.mode||">"===e.mode)}clearCache(){}get hasCommands(){return!1}async fetch(e,t=!1){return{results:[pt.create(e)]}}}((e,t)=>{mt(e,"name",{value:"SearchLinksProvider",configurable:!0})})(yt);var ft=Object.defineProperty;class vt{static create(e){const t=this.providers[e.type];if(!t)throw new Error(`Unknown provider type: ${e.type}`);return new t(e)}}((e,t)=>{ft(e,"name",{value:"ServerDefinedProviderFactory",configurable:!0})})(vt),vt.providers={remote:b,prefetched:y,files:me,help:fe,"search-links":yt,"main-window-commands":ut};var gt=Object.defineProperty,bt=Object.getOwnPropertyDescriptor,It=(e,t,s,i)=>{for(var r,o=i>1?void 0:i?bt(t,s):t,n=e.length-1;n>=0;n--)(r=e[n])&&(o=(i?r(t,s,o):r(o))||o);return i&&o&&gt(t,s,o),o};let St=class extends N{constructor(){super(...arguments),this._wildcard="*"}get debounce(){return parseInt(this.fetchDebounce,10)}get hasCommands(){return this.supportsCommands}get hasWildCard(){return this.modes.includes(this._wildcard)}get modes(){return""===this.supportedModes&&(this._modes=[""]),this._modes||(this._modes=JSON.parse(this.supportedModes)),this._modes}get scopeTypes(){return""===this.supportedScopeTypes?[]:(this._scopeTypes||(this._scopeTypes=JSON.parse(this.supportedScopeTypes)),this._scopeTypes)}connectedCallback(){this.provider=vt.create(this)}};((e,t)=>{gt(e,"name",{value:"ServerDefinedProviderElement",configurable:!0})})(St),It([e],St.prototype,"type",2),It([e],St.prototype,"supportedModes",2),It([e],St.prototype,"fetchDebounce",2),It([e],St.prototype,"supportedScopeTypes",2),It([e],St.prototype,"src",2),It([e],St.prototype,"supportsCommands",2),St=It([t],St);var Et=Object.defineProperty;Object.getOwnPropertyDescriptor;let Pt=class extends v{static from(e){return new Pt({title:e.title,typeahead:"",priority:-10-e.index,score:-10,group:e.group,action:{type:"help",description:"",prefix:e.prefix},persistentHint:e.persistentHint})}constructor(e){super(e),this.persistentHint=e.persistentHint}getHint(){return o``}render(e,t){const s=super.render(e,void 0),i=document.createElement("span");return i.innerHTML=this.title,s.titleNodes=[i],this.persistentHint&&(s.persistentHint.innerHTML=this.persistentHint,s.persistentHint.hidden=!1),s}activate(e,t){e.commandPaletteInput.value=this.action.prefix+e.getTextWithoutMode()}autocomplete(e){e.commandPaletteInput.value=this.action.prefix+e.getTextWithoutMode()}calculateScore(e){return 0}get action(){return this._action}};((e,t)=>{Et(e,"name",{value:"HelpItem",configurable:!0})})(Pt),Pt=((e,t,s,i)=>{for(var r,o=t,n=e.length-1;n>=0;n--)(r=e[n])&&(o=r(o)||o);return o})([f],Pt);var Tt=Object.defineProperty,Ct=Object.getOwnPropertyDescriptor,kt=(e,t,s,i)=>{for(var r,o=i>1?void 0:i?Ct(t,s):t,n=e.length-1;n>=0;n--)(r=e[n])&&(o=(i?r(t,s,o):r(o))||o);return i&&o&&Tt(t,s,o),o};let xt=class extends HTMLElement{connectedCallback(){this.hidden=!0}show(e){return this.isEnabledScopeType(e)}isEnabledScopeType(e){return!this.scopeTypes||this.scopeTypes&&JSON.parse(this.scopeTypes).includes(e.scope.type)}toItem(e){const t={group:this.group,title:this.titleElement.innerHTML,index:e};return this.prefix&&(t.prefix=this.prefix),this.hintElement.textContent&&(t.persistentHint=this.hintElement.innerHTML),Pt.from(t)}};((e,t)=>{Tt(e,"name",{value:"CommandPaletteHelpElement",configurable:!0})})(xt),kt([e],xt.prototype,"group",2),kt([e],xt.prototype,"prefix",2),kt([e],xt.prototype,"scopeTypes",2),kt([r],xt.prototype,"titleElement",2),kt([r],xt.prototype,"hintElement",2),xt=kt([t],xt);var wt=Object.defineProperty;Object.getOwnPropertyDescriptor;let jt=class extends v{static from(e){return new jt({title:e.title,priority:e.priority,group:e.group,subtitle:e.subtitle,match_fields:e.match_fields,typeahead:e.typeahead,hint:e.hint,score:0,action:{type:"api-defined-item",activate:e.activate,copy:e.copy}})}constructor(e){super(e)}get action(){return this._action}activate(e,t){super.activate(e,t),this.action.activate(e,t)}copy(e){super.copy(e),this.action.copy(e)}};((e,t)=>{wt(e,"name",{value:"APIDefinedItem",configurable:!0})})(jt),jt=((e,t,s,i)=>{for(var r,o=t,n=e.length-1;n>=0;n--)(r=e[n])&&(o=r(o)||o);return o})([f],jt);var qt=Object.defineProperty;Object.getOwnPropertyDescriptor;let Mt=class extends v{constructor(e){e.priority=11,e.score=1,e.typeahead=e.title,e.group="commands",super(e)}get activateTrackingEventType(){return"command_executed"}};((e,t)=>{qt(e,"name",{value:"CommandItem",configurable:!0})})(Mt),Mt=((e,t,s,i)=>{for(var r,o=t,n=e.length-1;n>=0;n--)(r=e[n])&&(o=r(o)||o);return o})([f],Mt);var Dt=Object.defineProperty;Object.getOwnPropertyDescriptor;let Lt=class extends de{getAvatarTemplate(e,t){return o`<img src="${e}" alt="${t}" class="avatar avatar-1 avatar-small" />`}};((e,t)=>{Dt(e,"name",{value:"JumpToOrgItem",configurable:!0})})(Lt),Lt=((e,t,s,i)=>{for(var r,o=t,n=e.length-1;n>=0;n--)(r=e[n])&&(o=r(o)||o);return o})([f],Lt);var Ot=Object.defineProperty;Object.getOwnPropertyDescriptor;let At=class extends de{getAvatarTemplate(e,t){return o`<img src="${e}" alt="${t}" class="avatar avatar-1" />`}};((e,t)=>{Ot(e,"name",{value:"JumpToTeamItem",configurable:!0})})(At),At=((e,t,s,i)=>{for(var r,o=t,n=e.length-1;n>=0;n--)(r=e[n])&&(o=r(o)||o);return o})([f],At);var Ht=Object.defineProperty,_t=Object.getOwnPropertyDescriptor,Bt=(e,t)=>Ht(e,"name",{value:t,configurable:!0}),$t=(e,t,s,i)=>{for(var r,o=i>1?void 0:i?_t(t,s):t,n=e.length-1;n>=0;n--)(r=e[n])&&(o=(i?r(t,s,o):r(o))||o);return i&&o&&Ht(t,s,o),o};let Ft=class extends HTMLElement{constructor(){super(...arguments),this.setupComplete=!1,this.connected=!1,this.multiPageEnabled=!1}static get observedAttributes(){return["value","typeahead","scope"]}setup(){this.classList.add("d-flex","flex-items-center","flex-nowrap","py-1","pl-3","pr-2","border-bottom"),this._renderElement(),this.onInputBound=this.onInput.bind(this),this.onKeydownBound=this.onKeydown.bind(this),this.onClearBound=this.onClear.bind(this),this.input=this.querySelector("input.js-input"),this.overlayInput=this.querySelector("input.js-overlay-input"),this.clearButton=this.querySelector(".js-clear"),this.scopeElement=this.querySelector("command-palette-scope"),this.searchIcon=this.querySelector(".js-search-icon"),this.spinner=this.querySelector(".js-spinner"),this.defaultScope=this.scope,this.hasAttribute("autofocus")&&this.input.focus(),this.input.addEventListener("input",this.onInputBound),this.input.addEventListener("keydown",this.onKeydownBound),this.clearButton.addEventListener("click",this.onClearBound),this.clearButton.addEventListener("keydown",(e=>{"Enter"===e.key&&this.onClearBound(e)})),this.clearButton.hidden=!0,0!==this.value.length&&this._dispatchEvent("command-palette-input"),this.setupComplete=!0}connectedCallback(){this.setupComplete||this.setup(),this.value=this.getAttribute("value")||"",this.typeahead=this.getAttribute("typeahead")||"",this.placeholder=this.getAttribute("placeholder")||"",this.connected=!0}attributeChangedCallback(e,t,s){!this.input||("typeahead"===e?this.typeahead=s:"value"===e&&(this.value=s,this._dispatchEvent("command-palette-input")))}focus(){this.input.focus()}setRemovedTokenAndSelect(e){e&&(this.value=e),this.focus(),this.input.select()}get scope(){return this.scopeElement.scope}set scope(e){this.scopeElement.scope=e}hasScope(){return this.scopeElement.hasScope()}clearScope(){return this.scopeElement.clearScope()}removeToken(){return this.scopeElement.removeToken()}get placeholder(){return this.input.getAttribute("placeholder")||""}set placeholder(e){this.input.setAttribute("placeholder",e)}get typeaheadPlaceholder(){var e;return(null==(e=a(this,"typeaheadPlaceholder"))?void 0:e.textContent)||""}set typeaheadPlaceholder(e){a(this,"typeaheadPlaceholder").textContent=e}get value(){var e;return(null==(e=this.input)?void 0:e.value)||""}set value(e){this.input.value=e,this.typeahead=e,this.resetPlaceholder(),this.onInput()}get overlay(){return this.overlayInput.value}set overlay(e){this.overlayInput.value=e}set mirror(e){a(this,"mirror").textContent=e}get typeaheadText(){return a(this,"typeaheadText").textContent||""}set typeaheadText(e){a(this,"typeaheadText").textContent=e}get typeahead(){return this.typeaheadValue}set typeahead(e){if(this.typeaheadValue=this.overlay+e,this.mirror=this.value,""===e)this.typeaheadText="";else if(this.placeholder="",this.typeaheadPlaceholder="",this.valueStartsWithTypeahead){const t=this.value.length-(this.overlay?1:0);this.typeaheadText=e.substring(t)}else this.typeaheadText=` – ${e}`}showModePlaceholder(e=""){this.typeaheadPlaceholder=e}get valueStartsWithTypeahead(){return this.typeaheadValue.toLowerCase().startsWith(this.value.toLowerCase())}get isCursorAtEnd(){return this.value.length===this.input.selectionStart}set loading(e){this.spinner.hidden=!e,this.searchIcon.hidden=e}resetScopeIfNeeded(){""===this.value&&this.scope.id!==this.defaultScope.id&&(this.scope=this.defaultScope)}resetPlaceholder(){this.value.replace(this.overlay,"")&&this.overlay&&(this.typeaheadPlaceholder=""),this.placeholder=this.getAttribute("placeholder")||""}onInput(){this.resetPlaceholder(),this.clearButton.hidden=!this.hasSomethingToClear(),this.connected&&this._dispatchEvent("command-palette-input")}onClear(){this.value="",this.input.focus(),this._dispatchEvent("command-palette-cleared")}onKeydown(e){if(this.isSelectKeystroke(e.key)&&(this._dispatchEvent("command-palette-select"),e.stopImmediatePropagation(),e.preventDefault()),!this.hasSomethingToClear()||!ae(e)||"Backspace"!==e.key)return 0===this.input.selectionStart&&0===this.input.selectionEnd&&(this.hasScope()||this.multiPageEnabled)&&"Backspace"===e.key?(this._dispatchEvent("command-palette-descope"),e.stopImmediatePropagation(),void e.preventDefault()):void 0;this.onClear()}hasSomethingToClear(){return this.scopeElement.hasScope()||this.value.length>0}isSelectKeystroke(e){return"Tab"===e||"ArrowRight"===e&&this.isCursorAtEnd}textSelected(){return this.input.selectionStart!==this.input.selectionEnd}_dispatchEvent(e){const t=new CustomEvent(e,{cancelable:!0,detail:{typeahead:this.typeahead,value:this.value}});return this.dispatchEvent(t)}_renderElement(){const e=(re()?"⌘":"Ctrl")+" + Backspace";c(Bt((()=>o`
        <div class="command-palette-input-group flex-1 form-control border-0 box-shadow-none" style="z-index: 0">
          <div class="command-palette-typeahead position-absolute d-flex flex-items-center Truncate">
            <span class="typeahead-segment input-mirror" data-target="command-palette-input.mirror"></span>
            <span class="Truncate-text" data-target="command-palette-input.typeaheadText"></span>
            <span class="typeahead-segment" data-target="command-palette-input.typeaheadPlaceholder"></span>
          </div>
          <input
            class="js-overlay-input typeahead-input d-none"
            disabled
            tabindex="-1"
            aria-label="Hidden input for typeahead"
          />
          <input
            type="text"
            autocomplete="off"
            autocorrect="off"
            autocapitalize="off"
            spellcheck="false"
            class="js-input typeahead-input form-control border-0 box-shadow-none input-block width-full"
            aria-label="Command palette input"
            aria-haspopup="listbox"
            aria-expanded="false"
            aria-autocomplete="list"
            aria-controls="command-palette-item-stack"
            role="combobox"
          />
        </div>
        <button
          class="js-clear btn-link color-fg-muted no-underline px-2 tooltipped tooltipped-w"
          role="button"
          tabindex="0"
          aria-label="${e}"
        >
          Clear
        </button>
      `),"inputTemplate")(),this)}};Bt(Ft,"CommandPaletteInputElement"),Ft.tagName="command-palette-input",$t([e],Ft.prototype,"multiPageEnabled",2),Ft=$t([t],Ft);var Gt=Object.defineProperty,Rt=(e,t)=>Gt(e,"name",{value:t,configurable:!0});window.customElements.get(ce.tagName)||window.customElements.define(ce.tagName,ce);const Wt=i((()=>{const e=Ut();!e||e.clearCommands(!1)}),1500);function Nt(){const e=Ut();if(!e)return;const t=e.closest(".js-command-palette-dialog");!t||(t.addEventListener("toggle",(()=>{t.open?e.activate():e.deactivate()})),document.addEventListener("keydown",Kt),l(".js-socket-channel.js-updatable-content",{subscribe:e=>T(e,"socket:message",Wt)}))}function Ut(){return document.querySelector(ce.tagName)}function Kt(e){const t=Ut();if(!t)return;const s=Xt(),i=Qt(t.commandsModeHotkey,e),r=!Vt(e)&&!s&&(Qt(t.activationHotkey,e)||i),o=!s&&(Qt(t.secondaryActivationHotkey,e)||i),n=t.hasAttribute("data-memex-hotkey-enabled")&&s&&Qt(t.memexActivationHotkey,e);(r||o||n)&&(Yt(i),e.preventDefault(),e.stopPropagation())}function Qt(e,t){const s=h(t);return e.split(",").some((e=>s===e))}function Vt(e){return zt(e)||Jt(e)}function zt(e){const t=e.target;return!!t&&null!==t.closest(".js-previewable-comment-form")}function Jt(e){const t=e.target;if(!t)return!1;const s=t.closest(".js-code-editor");if(!s)return!1;const i=C(s);if(!i)return!1;const r=i.editor;if(!r)return!1;const o=r.getMode().name;return"gfm"===o||"markdown"===o}function Xt(){return!!document.querySelector("#memex-root")}function Yt(e){for(const t of document.querySelectorAll(".js-command-palette-dialog")){const s=t.querySelector(Ft.tagName);if(!s)return;if(t.open)t.open=!1;else{Zt(s,e);const i=t.querySelector(ce.tagName);i&&(i.previouslyActiveElement=document.activeElement),t.open=!0}}}function Zt(e,t){const s=e.value.startsWith(">");return t&&!s?(e.value=`>${e.value}`,!0):!(t||!s||(e.value=e.value.substring(1),0))}Rt(Nt,"observeCommandPalette"),Rt(Ut,"findCommandPalette"),Rt(Kt,"handleKeyDown"),Rt(Qt,"hotkeyMatchesEvent"),Rt(Vt,"shouldIgnoreActivation"),Rt(zt,"triggeredInsideAPreviewableCommentForm"),Rt(Jt,"triggeredInsideAMarkdownCodeEditor"),Rt(Xt,"triggeredInsideMemex"),Rt(Yt,"toggleCommandPalette"),Rt(Zt,"toggleCommandMode"),Nt()}}}));
System.register(["./chunk-vendor.js","./chunk-frameworks.js"],(function(e){"use strict";var t,s,n,o,c,i,r,m,a;return{setters:[function(e){t=e.o,s=e.a,n=e.r,o=e.f},function(e){c=e.c,i=e.h,r=e.e,m=e.u,a=e.g}],execute:function(){e("h",h);var l=Object.defineProperty,u=(e,t)=>l(e,"name",{value:t,configurable:!0});let d=[];function j(e){e.querySelector(".js-write-tab").click();const t=e.querySelector(".js-comment-field");t.focus(),o(t,"change")}function f(e){return e.querySelector(".js-comment-edit-form-deferred-include-fragment")}function y(e){var t;null==(t=f(e))||t.setAttribute("loading","eager")}function h(e){const t=e.currentTarget.closest("form"),s=e.currentTarget.getAttribute("data-confirm-text");if(i(t)&&!confirm(s))return!1;for(const e of t.querySelectorAll("input, textarea")){const t=e;t.value=t.defaultValue,t.classList.contains("session-resumable-canceled")&&(t.classList.add("js-session-resumable"),t.classList.remove("session-resumable-canceled"))}const n=e.currentTarget.closest(".js-comment");return n&&n.classList.remove("is-comment-editing"),!0}function g(e){const t=e.querySelector("ol");if(t){t.innerHTML="";const e=d.map((e=>{const t=document.createElement("li");return t.textContent=e,t}));for(const s of e)t.appendChild(s)}e.hidden=!1}function p(e,t){const s=e.querySelector(".js-comment-show-on-error");s&&(s.hidden=!t);const n=e.querySelector(".js-comment-hide-on-error");n&&(n.hidden=t)}t(".js-comment-header-actions-deferred-include-fragment",{subscribe:e=>c(e,"loadstart",(()=>{y(e.closest(".js-comment"))}),{capture:!1,once:!0})}),t(".js-comment .contains-task-list",{add:e=>{y(e.closest(".js-comment"))}}),s("click",".js-comment-edit-button",(function(e){const t=e.currentTarget.closest(".js-comment");t.classList.add("is-comment-editing");const s=f(t);s?s.addEventListener("include-fragment-replaced",(()=>j(t)),{once:!0}):j(t);const n=e.currentTarget.closest(".js-dropdown-details");n&&n.removeAttribute("open")})),u(j,"focusEditForm"),u(f,"findEditFormDeferredIncludeFragment"),u(y,"loadEditFormDeferredIncludeFragment"),s("click",".js-comment-hide-button",(function(e){const t=e.currentTarget.closest(".js-comment");p(t,!1);const s=t.querySelector(".js-minimize-comment");s&&s.classList.remove("d-none");const n=e.currentTarget.closest(".js-dropdown-details");n&&n.removeAttribute("open")})),s("click",".js-comment-hide-minimize-form",(function(e){e.currentTarget.closest(".js-minimize-comment").classList.add("d-none")})),u(h,"handleCommentCancelButtonClick"),s("click",".js-comment-cancel-button",h),s("click",".js-cancel-issue-edit",(function(e){e.currentTarget.closest(".js-details-container").querySelector(".js-comment-form-error").hidden=!0})),n(".js-comment-delete, .js-comment .js-comment-update, .js-issue-update, .js-comment-minimize, .js-comment-unminimize",(function(e,t,s){const n=e.closest(".js-comment");n.classList.add("is-comment-loading");const o=n.getAttribute("data-body-version");o&&s.headers.set("X-Body-Version",o)})),n(".js-comment .js-comment-update",(async function(e,t){let s;const n=e.closest(".js-comment"),o=n.querySelector(".js-comment-update-error"),c=n.querySelector(".js-comment-body-error");o instanceof HTMLElement&&(o.hidden=!0),c instanceof HTMLElement&&(c.hidden=!0),d=[];try{s=await t.json()}catch(e){if(422!==e.response.status)throw e;{const t=JSON.parse(e.response.text);if(t.errors)return void(o instanceof HTMLElement&&(o.textContent=`There was an error posting your comment: ${t.errors.join(", ")}`,o.hidden=!1))}}if(!s)return;const i=s.json;i.errors&&i.errors.length>0&&(d=i.errors,g(c));const m=n.querySelector(".js-comment-body");m&&i.body&&(m.innerHTML=i.body),n.setAttribute("data-body-version",i.newBodyVersion);const a=n.querySelector(".js-body-version");a instanceof HTMLInputElement&&(a.value=i.newBodyVersion);for(const e of n.querySelectorAll("input, textarea")){const t=e;t.defaultValue=t.value}n.classList.remove("is-comment-stale","is-comment-editing");const l=n.querySelector(".js-comment-edit-history");if(l){const e=await r(document,i.editUrl);l.innerHTML="",l.append(e)}})),t(".js-comment-body-error",{add:e=>{d&&d.length>0&&g(e)}}),u(g,"showBodyErrors"),n(".js-comment .js-comment-delete, .js-comment .js-comment-update, .js-comment-minimize, .js-comment-unminimize",(async function(e,t){const s=e.closest(".js-comment");try{await t.text()}catch(e){if(422!==e.response.status)throw e;{let t;try{t=JSON.parse(e.response.text)}catch(e){}t&&t.stale&&s.classList.add("is-comment-stale")}}s.classList.remove("is-comment-loading")})),u(p,"toggleMinimizeError"),n(".js-timeline-comment-unminimize, .js-timeline-comment-minimize",(async function(e,t){const s=e.closest(".js-minimize-container");try{const e=await t.html();s.replaceWith(e.html)}catch(e){p(s,!0)}})),n(".js-discussion-comment-unminimize, .js-discussion-comment-minimize",(async function(e,t){const s=e.closest(".js-discussion-comment"),n=s.querySelector(".js-discussion-comment-error");n&&(n.hidden=!0);try{const e=await t.html();s.replaceWith(e.html)}catch(e){if(!(e.response.status>=400&&e.response.status<500))throw e;if(e.response.html){const t=e.response.html.querySelector(".js-discussion-comment").getAttribute("data-error");n instanceof HTMLElement&&(n.textContent=t,n.hidden=!1)}}})),n(".js-comment-delete",(async function(e,t){await t.json();let s=e.closest(".js-comment-delete-container");s||(s=e.closest(".js-comment-container")||e.closest(".js-line-comments"),s&&1!==s.querySelectorAll(".js-comment").length&&(s=e.closest(".js-comment"))),s.remove()})),n(".js-issue-update",(async function(e,t){var s,n,o;const c=e.closest(".js-details-container"),i=c.querySelector(".js-comment-form-error");let r;try{r=await t.json()}catch(e){i.textContent=(null==(o=null==(n=null==(s=e.response)?void 0:s.json)?void 0:n.errors)?void 0:o[0])||"Something went wrong. Please try again.",i.hidden=!1}if(!r)return;c.classList.remove("open"),i.hidden=!0;const m=r.json;if(null!=m.issue_title){c.querySelector(".js-issue-title").textContent=m.issue_title;const e=c.closest(".js-issues-results");if(e){if(e.querySelector(".js-merge-pr.is-merging")){const t=e.querySelector(".js-merge-pull-request textarea");t instanceof HTMLTextAreaElement&&t.value===t.defaultValue&&(t.value=t.defaultValue=m.issue_title)}else if(e.querySelector(".js-merge-pr.is-squashing")){const t=e.querySelector(".js-merge-pull-request .js-merge-title");t instanceof HTMLInputElement&&t.value===t.defaultValue&&(t.value=t.defaultValue=m.default_squash_commit_title)}const t=e.querySelector("button[value=merge]");t&&t.setAttribute("data-input-message-value",m.issue_title);const s=e.querySelector("button[value=squash]");s&&s.setAttribute("data-input-title-value",m.default_squash_commit_title)}}document.title=m.page_title;for(const t of e.elements)(t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement)&&(t.defaultValue=t.value)})),n(".js-comment-minimize",(async function(e,t){await t.json();const s=e.closest(".js-comment"),n=s.querySelector(".js-minimize-comment");if(n&&n.classList.contains("js-update-minimized-content")){const t=e.querySelector("input[type=submit], button[type=submit]");t&&t.classList.add("disabled");const n=s.closest(".js-comment-container");n&&await m(n)}else{n&&n.classList.add("d-none");const t=e.closest(".unminimized-comment");t.classList.add("d-none"),t.classList.remove("js-comment");const s=e.closest(".js-minimizable-comment-group").querySelector(".minimized-comment");s&&s.classList.remove("d-none"),s&&s.classList.add("js-comment")}})),n(".js-comment-unminimize",(async function(e,t){await t.json();const s=e.closest(".js-minimizable-comment-group"),n=s.querySelector(".unminimized-comment"),o=s.querySelector(".minimized-comment");if(n)n.classList.remove("d-none"),n.classList.add("js-comment"),o&&o.classList.add("d-none"),o&&o.classList.remove("js-comment");else{if(o){const e=o.querySelector(".timeline-comment-actions");e&&e.classList.add("d-none"),o.classList.remove("js-comment")}const e=s.closest(".js-comment-container");await m(e)}})),s("details-menu-select",".js-comment-edit-history-menu",(e=>{const t=e.detail.relatedTarget.getAttribute("data-edit-history-url");if(!t)return;e.preventDefault();const s=r(document,t);a({content:s,dialogClass:"Box-overlay--wide"})}),{capture:!0})}}}));